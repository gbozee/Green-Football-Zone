(function(){"use strict";function n(e,n,r,i){function u(){f(),a()}function a(){n.$on("$routeChangeError",function(n,r,o,u){if(s)return;s=!0;var a="Error routing: "+(r&&r.name)+". "+(u.msg||"");i.logWarning(a,r,t,!0),e.path("/")})}function f(){n.$on("$routeChangeSuccess",function(e,t,i){s=!1;var o=r.docTitle+" "+(t.title||"");n.title=o})}var s=!1,o={setRoutingHandlers:u,updateDoctitle:f};return o}var e=angular.module("app",["ngAnimate","ngRoute","ngSanitize","ngResource","ngTouch","restangular","common","common.bootstrap","ui.bootstrap","jmdobry.angular-cache","directive.g+signin","app.pusher","ngProgress"]);"use strict";var t="routemediator";angular.module("app").factory(t,["$location","$rootScope","config","logger",n]),e.run(["$route","routemediator",function(e,t){t.updateDoctitle()}])})(),function(){"use strict";var e=angular.module("app");toastr.options.timeOut=4e3,toastr.options.positionClass="toast-bottom-right";var t="/api/v2.0/",n={controllerActivateSuccess:"controller.activateSuccess",spinnerToggle:"spinner.toggle"},r={imageBasePath:"/img/",unknownPersonImageSource:"team-icon.png"},i={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46},s={appErrorPrefix:"[GF Error] ",docTitle:"GF: ",events:n,keyCodes:i,remoteServiceName:t,version:"2.0.0",imageSettings:r};e.value("config",s),e.config(["$logProvider",function(e){e.debugEnabled&&e.debugEnabled(!0)}]),e.config(["commonConfigProvider",function(e){e.config.controllerActivateSuccessEvent=s.events.controllerActivateSuccess,e.config.spinnerToggleEvent=s.events.spinnerToggle}]),e.config(["PusherServiceProvider",function(e){e.setToken("7a3da06e97f015d45d27").setOptions({})}]),e.config(["RestangularProvider",function(e){e.setBaseUrl("/api/v2.0"),e.setRestangularFields({id:"name",route:"restangularRoute",selfLink:"self.href",name:"name"}),e.setRequestInterceptor(function(e,t){return t==="remove"?undefined:e}),e.setResponseExtractor(function(e,t,n,r){var i;return t==="getList"?(i=e.data.results,i.metadata=e.data.meta):i=e.data,i})}])}(),function(){"use strict";function t(e,t,n){var r=t.appErrorPrefix,i=n.getLogFn("app","error");return function(t,n){e(t,n);if(r&&t.message.indexOf(r)===0)return;var s={exception:t,cause:n},o=r+t.message;i(o,s,!0)}}var e=angular.module("app");e.config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate","config","logger",t])}])}(),function(){"use strict";function t(e,t){function r(t,r){return r.resolve=angular.extend(r.resolve||{},{prime:n}),e.when(t,r),e}t.forEach(function(e){r(e.url,e.config)}),e.otherwise({redirectTo:"/"})}function n(e){return e.prime()}function r(){return[{url:"/",config:{templateUrl:"/p/app/dashboard/dashboard.html",title:"dashboard",settings:{nav:2,content:'<i class="icon-dashboard"></i> Dashboard'}}},{url:"/user-topics",config:{title:"user-topics",templateUrl:"/p/app/user/topic.html",settings:{nav:4,content:'<i class="glyphicon glyphicon-user"></i> My Followed Topics'}}},{url:"/admin",config:{title:"admin",templateUrl:"/p/app/admin/admin.html",settings:{nav:1,content:'<i class="icon-lock"></i>Admin'}}},{url:"/topic/:topic_id",config:{title:"replies",templateUrl:"/p/app/user/single-topic.html",resolve:{set_team:c}}},{url:"/my-comments",config:{title:"posted-comments",templateUrl:"/p/app/user/user-replies.html",settings:{nav:5,content:'<i class="glyphicon glyphicon-comment"></i> Posted Replies'}}},{url:"/my-friends",config:{title:"g+_friends",templateUrl:"/p/app/user/friends.html"}},{url:"/leagues",config:{title:"leagues",templateUrl:"/p/app/gf/league.html",settings:{nav:3,content:'<i class="icon-list"></i> Leagues'}}},{url:"/leagues/:league_name",config:{title:"teams",templateUrl:"/p/app/gf/team.html"}},{url:"/teams/:team_name",config:{title:"single-team",templateUrl:"/p/app/gf/single-team.html"}},{url:"/all-teams",config:{title:"all-teams",templateUrl:"/p/app/gf/all_teams.html",settings:{}}},{url:"/teams/search/:search",config:{title:"all-teams",templateUrl:"/p/app/gf/all_teams.html"}},{url:"/author",config:{title:"author",templateUrl:"/p/app/user/author.html",settings:{nav:6,content:'<i class="icon-list"></i> Authored Topics'}}},{url:"/author/create-topic/:create",config:{title:"author",templateUrl:"/p/app/user/author.html"}},{url:"/update/:topic_id",config:{title:"update-topic",templateUrl:"/p/app/user/update-topic.html"}},{url:"/add_topic",config:{title:"add-topic",templateUrl:"/p/app/user/update-topic.html",resolve:{update_topic:o}}},{url:"/league_update/:name",config:{title:"update-league",templateUrl:"/p/app/admin/update-league.html",resolve:{update_topic:u}}},{url:"/add_league",config:{title:"add-league",templateUrl:"/p/app/admin/create-league.html",resolve:{update_topic:a}}},{url:"/team_update/:name",config:{title:"update-team",templateUrl:"/p/app/admin/update-team.html",resolve:{update_topic:f}}},{url:"/add_team",config:{title:"add-team",templateUrl:"/p/app/admin/create-team.html",resolve:{update_topic:l}}},{url:"/update-reply/:key",config:{title:"update-reply",templateUrl:"/p/app/user/update-reply.html"}},{url:"/notifications",config:{title:"notifications",templateUrl:"/p/app/dashboard/notification.html"}}]}function i(e,t,n){var r=e.$q.defer();return n.getTopicById(t.current.pathParams.topic_id).then(function(e){r.resolve(e)}),r.promise}function s(e){return e.setTitle("Update Topic")}function o(e){return e.setTitle("Add Topic")}function u(e){return e.setLeagueTitle("Update League")}function a(e){return e.setLeagueTitle("Add League")}function f(e){return e.setTeamTitle("Update Team")}function l(e){return e.setTeamTitle("Add Team")}function c(e,t){return e.getTopic(t.current.pathParams.topic_id).then(function(n){e.setTeam(n.team.replace(/\s/g,"",t.current.pathParams.topic_id))})}var e=angular.module("app");e.constant("routes",r()),e.config(["$routeProvider","routes",t]),n.$inject=["datacontext"],i.$inject=["common","$route","datacontext"],s.$inject=["inhouse"],o.$inject=["inhouse"],u.$inject=["inhouse"],a.$inject=["inhouse"],f.$inject=["inhouse"],l.$inject=["inhouse"],c.$inject=["ReplyService","$route"]}(),function(){"use strict";function o(i,o,u,a,f,l,c){function E(e){var t=h.defer(),n=a.get(b);e&&n.remove("all_leagues"),i.get(u.apiBase+"leagues")}function S(e){var t=h.defer();return i.get(u.apiBase+"me/teams/"+e+"/unfollow").then(function(n){console.log(n),t.resolve(n),d("Just Unfollowed "+e.name)}),t.promise}function x(){function e(){d("Primed the data"),console.log("Replies",y),console.log(a.info())}function t(){}return g?g:(g=h.all([f.fetchUserDetails(),f.getUserTeams(),f.fetchUserReplies(),f.refreshAuthoredTopics(),f.refreshFollowedTopics(!0),c.getTeams(),l.getLeagues()]).then(t()).then(e),g)}function T(e){return userResource.getList({limit:e})}function N(e){if(B()&&!e)return h.when(s);var t="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=JSON_CALLBACK&num=50&q="+encodeURIComponent("http://greenfootball.org/?feed=rss2"),n=h.defer();return i.jsonp(t).then(function(e){d("Feed Recieved"),n.resolve(e.data.responseData.feed.entries),B(!0),s=e.data.responseData.feed.entries}),n.promise}function C(){return r.token===""?!1:r.token===null?!1:h.when(typeof r.token!="undefined")}function k(e){return userResource.uncached.one(e).get({team_admin:!0})}function L(e){var t=h.defer();return i.delete(u.apiBase+"topics/"+e.id).then(function(e){t.resolve(e)}),t.promise}function A(e){var t=h.defer();return i.delete(u.apiBase+"replies/"+e.key).then(function(e){t.resolve(e)}),t.promise}function O(e,t){var n={};t&&getTeamsFollowed(t);var r=_.find(_teams_following,{name:e});return console.log(r),typeof r!="undefined"?(n.count=r.followers_count,n.button_class="following",n.text="Following"):(n.button_class="",n.count=0,n.text="Follow"),h.when(n)}function M(e,t){return t?teamResource.uncached.one(e).customGETLIST("topics"):teamResource.cached.one(e).customGETLIST("topics")}function D(e){var t=config.appErrorPrefix+"Error retrieving data."+e.message;throw v(t,e),e}function P(e){if(q()&&!e)return h.when(n);if(!r.signed_in)return h.when([]);var t=h.defer();return i.get(u.apiBase+"friends").then(function(e){n=e.data.user,q(!0),d("Friends Recieved",n.length,0),t.resolve(n)},function(e){v("Could not recieve Friends"),t.reject(e)}),t.promise}function H(e){return z("teams",e)}function B(e){return z("news",e)}function j(e){return z("followed_team",e)}function F(e){return z("user_profile",e)}function I(e){return z("author_topics",e)}function q(e){return z("friends",e)}function R(e){return z("user_replies",e)}function U(e){return z("user_teams_topics",e)}function z(e,n){return n===undefined?t.isLoaded[e]:t.isLoaded[e]=n}var h=o.$q,p=o.logger.getLogFn,d=p(e),v=p(e,"error"),m=p(e,"success"),g,y=[],b=a.get("gfCache"),w={getTeamTopics:M,getButtonClass:O,getGooglePlusFriends:P,prime:x,unfollowTeam:S,toggleAdmin:k,deleteReply:A,getAuthors:k,hasGooglePlusToken:C,getAllUsers:T,getFeeds:N,deleteTopic:L};return w}var e="datacontext";angular.module("app").factory(e,["$http","common","Conf","$angularCacheFactory","userInfo","LeagueService","TeamService",o]);var t={isLoaded:{user_teams_topics:!1,author_topics:!1,league_with_teams:!1,teams:!1,all_topics:!1,loaded_locally:!1,author_teams:!1,friends:!1,news:!1,user_replies:!1,all_users:!1,followed_team:!1,user_profile:!1}},n=[],r={},i=[],s=[]}(),function(){"use strict";function t(e){function s(){return r}function o(e){r=e}function u(){return i}function a(e){i=e}function f(e){n=e}function l(){return n}function c(e){return moment.utc(e).format("ddd hh:mm a")}var t=e.$q,n="",r="",i="";return{setTitle:f,getLeagueTitle:s,setLeagueTitle:o,getTeamTitle:u,setTeamTitle:a,getTitle:l,setDate:c}}var e="inhouse";angular.module("app").service(e,["common",t])}(),function(){"use strict";var e=angular.module("app");e.directive("ccSidebar",["$window",function(e){function r(e,t,r){function o(){n.width()>=765?i.slideDown(350):i.slideUp(350)}function u(e){function n(){i.slideUp(350),$(".sidebar-dropdown a").removeClass(t)}var t="dropy";e.preventDefault(),s.hasClass(t)?s.hasClass(t)&&(s.removeClass(t),i.slideUp(350)):(n(),i.slideDown(350),s.addClass(t))}var i=t.find(".sidebar-inner"),s=t.find(".sidebar-dropdown a");t.addClass("sidebar"),n.resize(o),s.click(u)}var t={link:r,restrict:"A"},n=$(e);return t}]),e.directive("ccWidgetClose",function(){function t(e,t,n){function r(e){e.preventDefault(),t.parent().parent().parent().hide(100)}n.$set("href","#"),n.$set("wclose"),t.click(r)}var e={link:t,template:'<i class="icon-remove"></i>',restrict:"A"};return e}),e.directive("ccSlideBoxClose",function(){function t(e,t,n){function r(e){e.preventDefault(),t.parent().parent().parent().hide(100)}n.$set("href","#"),n.$set("sclose"),t.click(r)}var e={link:t,template:'<i class="icon-remove"></i>',restrict:"A"};return e}),e.directive("ccWidgetMinimize",function(){function t(e,t,n){function r(e){e.preventDefault();var n=t.parent().parent().next(".widget-content"),r=t.children("i");n.is(":visible")?(r.removeClass("icon-chevron-up"),r.addClass("icon-chevron-down")):(r.removeClass("icon-chevron-down"),r.addClass("icon-chevron-up")),n.toggle(500)}n.$set("href","#"),n.$set("wminimize"),t.click(r)}var e={link:t,template:'<i class="icon-chevron-up"></i>',restrict:"A"};return e}),e.directive("ccSlideBoxMinimize",function(){function t(e,t,n){function r(e){e.preventDefault();var n=t.parent().parent().next(".widget-content"),r=t.children("i");n.is(":visible")?(r.removeClass("icon-chevron-up"),r.addClass("icon-chevron-down")):(r.removeClass("icon-chevron-down"),r.addClass("icon-chevron-up")),n.toggle(500)}n.$set("href","#"),n.$set("sminimize"),t.click(r)}var e={link:t,template:'<i class="icon-chevron-up"></i>',restrict:"A"};return e}),e.directive("ccScrollToTop",["$window",function(e){function n(t,n,r){function s(){i.scrollTop()>300?n.slideDown():n.slideUp()}var i=$(e);n.addClass("totop"),i.scroll(s),n.find("a").click(function(e){e.preventDefault(),$("body").animate({scrollTop:0},500)})}var t={link:n,template:'<a href="#"><i class="icon-chevron-up"></i></a>',restrict:"A"};return t}]),e.directive("ccSpinner",["$window",function(e){function n(t,n,r){t.spinner=null,t.$watch(r.ccSpinner,function(r){t.spinner&&t.spinner.stop(),t.spinner=new e.Spinner(r),t.spinner.spin(n[0])},!0)}var t={link:n,restrict:"A"};return t}]),e.directive("ccImgPerson",["config",function(e){function i(e,r,i){i.$observe("ccImgPerson",function(e){e=t+(e||n),i.$set("src",e)})}var t=e.imageSettings.imageBasePath,n=e.imageSettings.unknownPersonImageSource,r={link:i,restrict:"A"};return r}]),e.directive("ccWidgetHeader",function(){function t(e,t,n){n.$set("class","widget-head")}var e={link:t,scope:{title:"@",subtitle:"@",rightText:"@",allowCollapse:"@"},templateUrl:"/p/app/layout/widgetheader.html",restrict:"A"};return e}),e.directive("upvote",function(){return{restrict:"E",templateUrl:"/p/app/layout/upvote.html",scope:{count:"@",upvote:"&",downvote:"&"}}}),e.directive("gfPageHeading",function(){return{restrict:"E",templateUrl:"/p/app/layout/Page-heading.html",scope:{title:"@",subtitle:"@"}}}),e.directive("gfPager",function(){return{restrict:"E",templateUrl:"/p/app/layout/gf-pager.html",scope:{showPrevious:"=",showNext:"=",next:"&",previous:"&"}}}),e.directive("gfFollowTeam",function(){return{restrict:"E",replace:!0,template:'<div class="gf-follow-button"><span ng-show="following" class="label label-info">Following</span><button class="btn btn-info btn-lg" style= "width: 160px" ng-hide="following" rel=6 ng-click="followTeam()">Follow</button></div>',scope:{teamToFollow:"="},controller:"gfFollowController"}}),e.directive("ngReallyClick",function(){return{restrict:"A",link:function(e,t,n){t.bind("click",function(){var t=n.ngReallyMessage;t&&confirm(t)&&e.$apply(n.ngReallyClick)})}}})}(),function(){"use strict";function t(e,t){function n(){var t=e.protocol()+"://"+e.host();return e.port()&&(t+=":"+e.port()),t}var r=t.remoteServiceName,i={clientId:"183001439932",apiBase:r,rootUrl:n(),scopes:"https://www.googleapis.com/auth/plus.login ",requestvisibleactions:"http://schemas.google.com/AddActivity http://schemas.google.com/ReviewActivity",cookiepolicy:"single_host_origin"};return i}function n(e,t){return{signIn:function(n){return t.post(e.apiBase+"connect",n)},verify:function(n){return t.post(e.apiBase+"verify",n)},getFriends:function(){return t.get(e.apiBase+"friends")},disconnect:function(){return t.post(e.apiBase+"disconnect")}}}var e="Conf";angular.module("app").factory(e,["$location","config",t]),angular.module("app").factory("GFAPI",["Conf","$http",n])}(),function(){"use strict";function e(e,t){return{subscribe:function(n,r,i){t.then(function(t){t.subscribe(n).bind(r,function(t){i&&i(t),e.$broadcast(n+":"+r,t),e.$digest()})})}}}function t(e){e("myNewCache",{capacity:1e3,maxAge:3e5,deleteOnExpire:"aggressive",recycleFreq:6e4,cacheFlushInterval:36e5,verifyIntegrity:!0})}function n(e,t){var n;return e.withConfig(function(e){n=t("gfCache",{maxAge:9e5,cacheFlushInterval:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage",capacity:100}),e.setDefaultHttpFields({cache:n})})}function r(){var e=["club","country"],t=["european","african","country"];return{types:e,c_leagues:t}}function i(){return function(e,t){return e.substring(0,1).toUpperCase()+e.substring(1)}}function s(e){var t={};return t.leagueResource=function(){return e.all("leagues")},t.teamResource=function(){return e.all("teams")},t.myResource=function(){return e.all("me")},t.userResource=function(){return e.all("users")},t.topicResource=function(){return e.all("topics")},t.replyResource=function(){return e.all("replies")},t.myTeamResource=function(){return e.all("my-teams")},t}angular.module("app").factory("Pusher",["$rootScope","PusherService",e]),angular.module("app").filter("capitalize",[i]),angular.module("app").service("gfTypeSupport",[r]),angular.module("app").service("gfService",["CachedRestangular",s]),angular.module("app").factory("CachedRestangular",["Restangular","$angularCacheFactory",n])}(),function(){"use strict";function t(t,n,r,i){function u(){f(),a()}function a(){n.$on("$routeChangeError",function(n,r,o,u){if(s)return;s=!0;var a="Error routing: "+(r&&r.name)+". "+(u.msg||"");i.logWarning(a,r,e,!0),t.path("/")})}function f(){n.$on("$routeChangeSuccess",function(e,t,i){s=!1;var o=r.docTitle+" "+(t.title||"");n.title=o})}var s=!1,o={setRoutingHandlers:u,updateDoctitle:f};return o}var e="routemediator";angular.module("app").factory(e,["$location","$rootScope","config","logger",t])}(),function(){"use strict";function t(e,t,n){function i(n){return t.refreshFollowedTopics(n).then(function(t){r.followedTopics=t,r.followedTopics=e("orderBy")(r.followedTopics,"-created"),s()})}function s(){r.pagedItems=[];for(var e=0;e<r.followedTopics.length;e++)e%r.itemsPerPage===0?r.pagedItems[Math.floor(e/r.itemsPerPage)]=[r.followedTopics[e]]:r.pagedItems[Math.floor(e/r.itemsPerPage)].push(r.followedTopics[e])}var r=this;i(),n.$on("refresh:teams",function(){i(!0)}),r.currentPage=0,r.itemsPerPage=2,r.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},r.prevPage=function(){console.log(r.pagedItems),r.currentPage>0&&r.currentPage--},r.nextPage=function(){console.log(r.pagedItems),r.currentPage<r.pagedItems.length-1&&r.currentPage++},r.setPage=function(e){r.currentPage=e}}function n(e){var t=this;t.currentPage=0,t.followedTeams=e.pagedTeams,t.itemsPerPage=6,t.unfollowTeam=e.unfollowTeam,t.prevPage=function(){t.currentPage>0&&t.currentPage--},t.nextPage=function(){t.currentPage<t.followedTeams().length-1&&t.currentPage++},t.setPage=function(e){t.currentPage=e}}function r(t,n,r,i,s,o,u,a){function d(){return _.filter(s.teams(),{type:p.type})}function v(){p.feeds=i.getFeeds(!0),p.feeds.then(function(){l("Feeds Refreshed")})}function m(){var t=[];n.activateController(t,e).then(function(){l("Activated Dashboard View")})}function g(){return h.getList({team_admin:!0}).then(function(e){p.adminTeams=e})}function y(){s.getAuthoredTopics().then(function(e){p.authoredTopics=e})}var f=n.logger.getLogFn,l=f(e),c=f(e,"error"),h=r.myTeamResource(),p=this;p.news={title:"GF News",description:""},p.gf_news=[],p.friendsCount=s.getFriends,p.title="My Dashboard",p.comments=s.replies,p.followedTeams=s.teams,p.feeds=i.getFeeds(),p.refreshNews=v,p.user=s.user,p.signedIn=s.isSignedIn,p.type="club",p.clientId=o.clientId,p.prefilltext="Argue on soccer related contents at Green Football",p.adminTeams=[],p.authoredTopics=[],p.followed_topics=s.followed_topics,p.showPrevious=!1,p.showNext=!0,p.sortorder="-votes",m(),u.subscribe("followed_teams","topic_added",function(e){l("New Topic Recieved"),a.$broadcast("refresh:teams")}),u.subscribe("followed_teams","reply_added",function(e){l("Reply from "+e.reply.by),t.$broadcast("update:replies")}),p.setTeamType=function(e){p.type=e},p.friendsIsZero=function(){s.getFriends().length==0},p.currentPage=0,p.itemsPerPage=2,p.feeds.then(function(e){console.log(e),p.pagedItems=[];for(var t=0;t<e.length;t++)t%p.itemsPerPage===0?p.pagedItems[Math.floor(t/p.itemsPerPage)]=[e[t]]:p.pagedItems[Math.floor(t/p.itemsPerPage)].push(e[t])}),p.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},p.prevPage=function(){console.log(p.pagedItems),p.currentPage>0&&p.currentPage--},p.nextPage=function(){console.log(p.pagedItems),p.currentPage<p.pagedItems.length-1&&p.currentPage++},p.setPage=function(e){p.currentPage=e}}var e="dashboard";angular.module("app").controller(e,["$rootScope","common","gfService","datacontext","userInfo","Conf","Pusher","$scope",r]),angular.module("app").controller("userTopics",["$filter","userInfo","$scope",t]),angular.module("app").controller("followedTeams",["userInfo",n])}(),function(){"use strict";function t(e){function n(){return t}function r(e){t.splice(e,1)}function i(){t=[]}var t=[];return e.$on("notification",function(e,n){t.push(n)}),e.$on("notification:delete",function(e,t){r(t)}),{notices:n,deleteNotices:i,removeNotification:r}}function n(t,n,r){function a(e,t){n.path(e),r.removeNotification(t)}function f(){var n=[];t.activateController(n,e).then(function(){})}var i=t.logger.getLogFn,s=i(e),o=i(e,"error"),u=this;u.navigate=a,u.notifications=r.notices,u.clear=r.deleteNotices,u.deleteNotice=r.removeNotification,f()}var e="notifier";angular.module("app").controller(e,["common","$location","gfNotifier",n]),angular.module("app").service("gfNotifier",["$rootScope",t])}(),function(){"use strict";function t(e,t){function c(e,t){var n=[];for(var r=0;r<e.length;r++)r%t===0?n[Math.floor(r/t)]=[e[r]]:n[Math.floor(r/t)].push(e[r]);return n}var n=e.all("leagues"),r=e.all("teams"),i=e.all("users"),s=n.getList().$object,o=r.getList().$object,u=i.getList().$object,a=i.getList({author:!0}).$object,f=4,l={};return l.leagues=function(){return s},l.teams=function(){return o},l.authors=function(){return a},l.users=function(){return u},l.addLeague=function(e){return n.post(e).then(function(e){return s.push(e),e})},l.getLeague=function(e){var t=_.find(s,{id:e});return console.log(t),t},l.getTeams=function(){return r.getList()},l.getLeagues=function(){return n.getList()},l.addTeam=function(e){console.log(e.league);var t=_.find(s,{name:e.league});return console.log(t),t.post("teams",e)},l.assignRole=function(e,t){return i.one(e.id).get(t).then(function(t){console.log(e.id),console.log(u);var n=_.findIndex(u,{id:e.id});return console.log(n),u[n]=t,t})},l.updateLeague=function(e){return n.one(e.name).customPUT(e).then(function(t){var n=_.indexOf(s,{id:e.id});return s[n]=t,console.log("Updated",t),t})},l.updateTeam=function(e){return r.one(e.name).customPUT(e).then(function(t){var n=_.indexOf(o,{id:e.id});return o[n]=t,t})},l.deleteLeague=function(e){return n.one(e.name).remove().then(function(t){var n=_.indexOf(s,{id:e.id});return s.splice(n,1),c(s,f)})},l.deleteTeam=function(t){return r.one(t.name).remove().then(function(e){var n=_.indexOf(o,{id:t.id});return o.splice(n,1),c(o,f)})},l.groupLeaguesByPage=function(e){return c(s,4)},l.groupTeamsByPage=function(e){return c(o,4)},l.groupUsersByPage=function(e){return c(u,4)},l.refresh=function(){return n.getList().then(function(e){return s=e,s}).then(function(e){return r.getList().then(function(e){return o=e,o})})},l}function n(){function e(t){var n=e.options,r=n.parser[n.strictMode?"strict":"loose"].exec(t),i={},s=14;while(s--)i[n.key[s]]=r[s]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(i[n.q.name][t]=r)}),i}function t(t){var n=e(t);return{limit:n.queryKey.limit,cursor:decodeURIComponent(n.queryKey.cursor)}}return e.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},{extractCursor:t}}function r(){return{restrict:"E",templateUrl:"/p/app/layout/league-parginator.html",scope:{items:"=",itemsPerPage:"@",query:"="},controller:"parginationCtrl"}}function i(t,n,r,i){function a(){t.activateController([],e).then(function(){o("Activated Admin View")})}function f(e){return r.assignRole(e)}function l(e){return r.assignRole(e,{team_admin:!0})}function c(e){return r.deleteLeague(e).then(function(e){o("League Deleted"),u.pagedItems=r.groupLeaguesByPage})}function h(e){return r.deleteTeam(e).then(function(e){o("Team Deleted"),u.pagedTeamItems=r.groupTeamsByPage})}var s=t.logger.getLogFn,o=s(e),u=this;u.title="Admin",u.assignAuthor=f,u.assignAdmin=l,u.deleteLeague=c,u.deleteTeam=h,u.currentFeedPage=1,u.refresh=r.refresh,u.showPrevious=!1,u.showNext=!0,u.deleteLeague=c,u.deleteTeam=h,u.query={},a(),i.subscribe("leagues","league_created",function(e){o(e.league.name+" now available"),u.refresh()}),u.pagedItems=r.groupLeaguesByPage,u.pagedTeamItems=r.groupTeamsByPage,u.pagedUserItems=r.groupUsersByPage,u.currentLeaguePage=0,u.currentTeamPage=0,u.currentUserPage=0,u.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},u.prevPage=function(){u.currentLeaguePage>0&&u.currentLeaguePage--},u.nextPage=function(e){console.log(e),u.currentLeaguePage<e.length-1&&u.currentLeaguePage++},u.setPage=function(e){u.currentLeaguePage=e},u.prevTeamPage=function(){u.currentTeamPage>0&&u.currentTeamPage--},u.nextTeamPage=function(e){console.log(e),u.currentTeamPage<e.length-1&&u.currentTeamPage++},u.setTeamPage=function(e){u.currentTeamPage=e},u.prevUserPage=function(){u.currentUserPage>0&&u.currentUserPage--},u.nextUserPage=function(e){console.log(e),u.currentUserPage<e.length-1&&u.currentUserPage++},u.setUserPage=function(e){u.currentUserPage=e}}function s(){return{restrict:"A",template:'<tr data-ng-repeat="p in list"><td><a href="#/team_update/{{ p.name }}">{{ p.name }}</a></td><td>{{ p.logo }}</td><td>{{ p.admin }}</td></tr>',scope:{list:"="}}}function o(){return{restrict:"A",template:'<tr data-ng-repeat="p in list"><td><a href="#/league_update/{{ $index }}">{{ p.name }}</a></td><td>{{ p.logo }}</td></tr>',scope:{list:"="}}}function u(){return{restrict:"A",template:'<th data-ng-repeat="head in header">{{head | capitalize}}</th>',scope:{header:"="}}}function a(){return{restrict:"E",templateUrl:"/p/app/admin/admin-partials/admin-table.html",scope:{header:"=",title:"@",list:"=",team:"@",color:"@"}}}var e="admin";angular.module("app").controller(e,["common","gfUtils","adminService","Pusher",i]),angular.module("app").directive("gfTeamList",[s]),angular.module("app").directive("gfLeagueList",[o]),angular.module("app").directive("gfTableHeader",[u]),angular.module("app").directive("gfLeagueParginator",[r]),angular.module("app").service("gfUtils",[n]),angular.module("app").service("adminService",["Restangular","$angularCacheFactory",t]),angular.module("app").directive("gfTable",[a])}(),function(){"use strict";function t(t,n,r,i){function f(){var t=[];n.activateController(t,e)}function l(){s.post(a.league).then(function(e){console.log(e),t.url("/admin")})}var s=r.all("leagues"),o=n.logger.getLogFn,u=o(e),a=this;a.types=i.types,a.title="Create League",a.league={},a.save=l,f()}function n(t,n,r,i,s){function l(){var t=[c()];r.activateController(t,e).then(function(){a("Admin View")})}function c(){o.one(t.name).get().then(function(e){console.log(e),f.league=e})}function h(){o.one(t.name).customPUT(f.league).then(function(e){a("League Updated"),n.url("/admin")})}var o=i.all("leagues"),u=r.logger.getLogFn,a=u(e),f=this;f.types=s.types,f.title="Update League",f.league={},f.save=h,l()}var e="create_league";angular.module("app").controller(e,["$location","common","Restangular","gfTypeSupport",t]).controller("update_league",["$routeParams","$location","common","Restangular","gfTypeSupport",n])}(),function(){"use strict";function t(t,n,r,i){function a(){var t=[l(),f()];n.activateController(t,e).then(function(){o("Activated Team Creation View")})}function f(){u.authors=r.authors}function l(){u.leagues=r.leagues}function c(){console.log(u.team),r.addTeam(u.team).then(function(e){console.log(e),t.url("/admin")})}var s=n.logger.getLogFn,o=s(e),u=this;u.title="Create Team",u.team={},u.save=c,u.data=i,a()}function n(t,n,r,i,s){function l(){var t=[c(),p(),h()];i.activateController(t,e).then(function(){a("Activated Team Creation View")})}function c(){o.one(n.name).get().then(function(e){f.team=e,console.log("GET TEAM",f.team)})}function h(){f.authors=t.all("users").getList({author:!0}).$object}function p(){f.leagues=t.all("leagues").getList().$object}function d(){o.one(f.team.name).customPUT(f.team).then(function(e){console.log(e),r.url("/admin")})}var o=t.all("teams"),u=i.logger.getLogFn,a=u(e),f=this;f.title="Update Team",f.save=d,f.data=s,l()}var e="create_team";angular.module("app").controller(e,["$location","common","adminService","gfTypeSupport",t]),angular.module("app").controller("update_team",["Restangular","$routeParams","$location","common","gfTypeSupport",n])}(),function(){"use strict";function t(t,n,r,i,s,o,u){function p(){t.activateController([d(!0)],e).then(function(){h=t.createSearchThrottle(l,"topics"),l.topicsSearch&&h(!0),f("Activated Admin View")})}function d(e){s.refreshFollowedTopics(e).then(function(e){l.topics=e,l.topics=r("orderBy")(l.topics,"-created"),l.filteredTopics=l.topics,w(),u.complete()})}function v(){u.start(),d(!0)}function m(e){e.keyCode===c.esc?(l.replySearch="",h(!0)):h(),w()}function g(e){var n=t.textContains,r=l.topicsSearch,i=r?n(e.body,r)||n(e.author,r)||n(e.team,r)||n(e.title,r):!0;return i}function y(e){return moment.utc(e).format("ddd hh:mm a")}function b(){l.pagedItems=[];for(var e=0;e<l.filteredTopics.length;e++)e%l.itemsPerPage===0?l.pagedItems[Math.floor(e/l.itemsPerPage)]=[l.filteredTopics[e]]:l.pagedItems[Math.floor(e/l.itemsPerPage)].push(l.filteredTopics[e])}function w(){l.currentPage=0,b()}var a=t.logger.getLogFn;u.height("10px");var f=a(e),l=this;l.title="User Topics",l.topics=[],l.filteredTopics=[],l.currentPage=0,l.itemsPerPage=5,l.refresh=v;var c=n.keyCodes;l.topicsSearch="",l.topicsFilter=g,l.search=m,l.date=y;var h=function(){};p(),o.subscribe("followed_teams","topic_added",function(){u.reset(),v()}),l.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},l.prevPage=function(){l.currentPage>0&&l.currentPage--},l.nextPage=function(){console.log(l.pagedItems),l.currentPage<l.pagedItems.length-1&&l.currentPage++},l.setPage=function(e){l.currentPage=e}}var e="topics";angular.module("app").controller(e,["common","config","$filter","inhouse","userInfo","Pusher","ngProgress",t])}(),function(){"use strict";function t(e,t,n){var r=e.topicResource(),i={},s=[],o,u;return i.getTopicId=function(){return u},i.getTopic=function(e){return r.one(e).get()},i.setTeam=function(e,t){u=t,o=e,console.log("REPLY_TEAM ",o)},i.getTeam=function(){return console.log(o),o},i.getRepliesForTopic=function(e){return r.one(e).all("replies").getList().then(function(e){return s=e,s})},i.reply_notification=function(e,t){var r={link:"/topic/"+e,body:"Reply from "+t.reply.by};n.$broadcast("notification",r)},i.refresh=function(){var e=t.get("gfCache");e.remove(s.getRequestedUrl().toString())},n.$on("refresh:replies",function(){this.refresh()}),i}function n(t,n,r,i,s,o,u,a,f){function d(){r.activateController([v(),m()],e).then(function(){c("Activated Topic View")})}function v(){return s.getTopic(n.topic_id).then(function(e){console.log(e),h.topic=e,h.voteCount=h.topic.votes,c(h.topic.title+" Loaded")})}function m(e){return s.getRepliesForTopic(n.topic_id).then(function(n){h.replies=n,h.replies=t("orderBy")(h.replies,"created"),e?S(e):S(),f.complete()})}function g(e){if(e.keyCode===p.esc){h.newReply={};return}if(e.type==="click"||e.keyCode===p.enter)return h.newReply.created=Date.now(),f.complete(),f.start(),o.addReply(h.topic,h.newReply).then(function(e){e.user_url=o.user().avatar_url,h.replies.push(e),c("Reply added"),h.newReply={},S(h.currentPage),f.complete()})}function y(){return f.complete(),f.start(),h.topic.customGET("vote").then(function(e){o.insertTopicIfFollowing(e),h.voteCount=e.votes,c("Voted"),f.complete()})}function b(){return f.complete(),f.start(),h.topic.customDELETE("vote").then(function(e){o.insertTopicIfFollowing(e),h.voteCount=e.votes,c("down voted"),f.complete()})}function w(e){f.complete(),f.start(),s.refresh(),m(e)}function E(){h.pagedItems=[];for(var e=0;e<h.replies.length;e++)e%h.itemsPerPage===0?h.pagedItems[Math.floor(e/h.itemsPerPage)]=[h.replies[e]]:h.pagedItems[Math.floor(e/h.itemsPerPage)].push(h.replies[e]);h.currentPage=h.pagedItems.length-1}function S(e){E(),e&&(h.currentPage=e)}var l=r.logger.getLogFn,c=l(e);f.height("10px");var h=this,p=i.keyCodes;h.clientId=u.clientId,h.title="Single Topic View",h.topic={},h.addReply=g,h.newReply={},h.voteCount=0,h.upVote=y,h.downVote=b,h.refresh=w,h.sortorder="-created",h.replies=[],h.signedIn=o.isSignedIn,d(),console.log("GGGGG",s.getTeam()),a.subscribe(s.getTeam(),"reply_added",function(e){c("Incoming Reply"),s.reply_notification(e.topic_id,e),console.log(e),f.reset(),w(h.currentPage)}),a.subscribe(s.getTeam(),"reply_updated",function(e){c("Updated Reply from ",e.reply.by),s.reply_notification(e.topic_id,e),f.reset(),w(h.currentPage)}),h.currentPage=0,h.itemsPerPage=5,h.prevPage=function(){h.currentPage>0&&h.currentPage--},h.nextPage=function(){console.log(h.pagedItems),h.currentPage<h.pagedItems.length-1&&h.currentPage++},h.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},h.setPage=function(
e){h.currentPage=e}}var e="topic";angular.module("app").controller(e,["$filter","$routeParams","common","config","ReplyService","userInfo","Conf","Pusher","ngProgress",n]),angular.module("app").service("ReplyService",["gfService","$angularCacheFactory","$rootScope",t])}(),function(){"use strict";function t(e,t,n,r,i,s){function O(){var e=gapi.client.plus.people.get({userId:"me"});e.execute(P)}function M(e,t){var n={type:"http://schemas.google.com/ReviewActivity",target:{url:"https://developers.google.com/+/web/snippet/examples/movie"},result:{type:"http://schema.org/Movie",name:"Night of the Living Dead",url:"https://developers.google.com/+/web/snippet/examples/movie",text:"It is amazingly effective at whatever it is that it is supposed to do.",reviewRating:{type:"http://schema.org/Rating",ratingValue:"100",bestRating:"100",worstRating:"0"}}},r=gapi.client.request({path:"plus/v1/people/me/moments/vault",method:"POST",body:JSON.stringify(n)});r.execute(function(e){console.log(e)})}function D(){O()}function P(e){if(e.displayName!==null||e.displayName!==undefined)T.google_display_name=e.displayName;if(e.image.url!==null||e.image.url!==undefined)T.gplus_image_url=e.image.url;if(e.url!==null||e.url!==undefined)T.gplus_profile=e.url;console.log(e);var t={access_token:T.access_token,google_plus_id:e.id,google_image_url:e.image.url,google_display_name:e.displayName};f.customPUT(t,"profile").then(function(e){return console.log(e),u("Details upgraded from G+"),f.customGETLIST("friends").then(function(e){console.log(e),u("Friends in G+ on GF recieved ",e.length),E=e},function(e){console.log(e)})},function(e){console.log(e)})}function H(){return i.when(y)}function B(){var e=[],t=n("orderBy")(T.authored_topics,"-created");for(var r=0;r<t.length;r++)r%C===0?e[Math.floor(r/C)]=[t[r]]:e[Math.floor(r/C)].push(t[r]);return e}var o=t.logger.getLogFn,u=o("userInfo"),a=o("userInfo","error"),f=r.all("me"),l=r.all("teams"),c=r.all("topics"),h=r.all("replies"),p=r.all("users"),d=r.all("my-teams"),v=!1,m=!1,g=!1,y=[],b=[],w=[],E=[],S=[],x={},T={},N={},C=6,k={},L=!1,A={};return k.getCredentials=function(e){L=!0,console.log(e),A=e,T.access_token=e.access_token,gapi.client.load("plus","v1",D)},k.isSignedIn=function(){return L},k.fetchUserDetails=function(){var e=i.defer();return f.customGET("profile").then(function(t){return T=t,e.resolve(T),t},function(e){console.log(e),a("Connection Timed out when recieving friends")}),e.promise},k.getFriends=function(){return E},k.getUserTeams=function(){return d.getList().then(function(e){return T.teams=e,w=e,console.log(e),v=!0,e})},k.fetchUserReplies=function(){return f.customGETLIST("comments").then(function(e){return b=e,m=!0,b})},k.fetchFollowedTeamTopics=function(){return f.customGETLIST("topics").then(function(e){return S=e,console.log("Followed Topcis ",S),e})},k.insertTopicIfFollowing=function(e){var t=_.findIndex(S,{id:e.id});console.log(t),t>-1&&(S[t]=e)},k.replies=function(){return b},k.teams=function(){return w},k.followTeam=function(e){var t=i.defer();return l.one(e.name).customGET("follow").then(function(t){return console.log(t),w.push(e),u("Followed Team ",e.name),w}).then(function(){f.customGETLIST("topics").then(function(e){S=e,u("Refreshed Followed Topics"),t.resolve(T)})}),t.promise},k.followed_topics=function(e){return S},k.getAuthoredTopics=H,k.refreshAuthoredTopics=function(){return f.customGETLIST("topics",{author:!0}).then(function(e){return y=e,g=!0,e})},k.pagedTeams=function(){var e=[];for(var t=0;t<w.length;t++)t%C===0?e[Math.floor(t/C)]=[w[t]]:e[Math.floor(t/C)].push(w[t]);return e},k.pagedFriends=function(){var e=[];for(var t=0;t<E.length;t++)t%C===0?e[Math.floor(t/C)]=[E[t]]:e[Math.floor(t/C)].push(E[t]);return console.log("Paged Friends ",e),e},k.deleteTopic=function(e){var t=i.defer();return c.one(e.id).remove().then(function(n){var r=_.findIndex(y,{id:e.id});y.splice(r,1),u("Topic Deleted"),t.resolve(y)}),t.promise},k.addTopic=function(e){var t=i.defer();return c.post(e).then(function(e){y.push(e),u("Topic Added"),t.resolve(y)}),t.promise},k.refreshFollowedTopics=function(e){if(e){var t=i.defer();return f.customGETLIST("topics").then(function(e){S=e,t.resolve(S),u("Topics Refreshed ",S.length)}),t.promise}return i.when(S)},k.unfollowTeam=function(e){var t=i.defer();return d.one(e.name).remove().then(function(t){var n=_.findIndex(w,{id:e.id});return w.splice(n,1),u("UnFollowed ",e.name),T}).then(function(){f.customGETLIST("topics").then(function(e){S=e,u("Topics Refreshed ",S.length),t.resolve(T)})}),t.promise},k.addReply=function(e,t){var n=i.defer();return c.one(e.id).post("replies",t).then(function(e){b.push(e),n.resolve(e)}),n.promise},k.deleteReply=function(e){var t=i.defer();return h.one(e.key).remove().then(function(){var n=_.findIndex(b,{id:e.id});b.splice(n,1),t.resolve()}),t.promise},k.updateReply=function(e){var t=i.defer();return h.one(e.key).customPUT(e).then(function(){var n=_.findIndex(b,{id:e.id});b[n]=e,u("Reply Updated"),t.resolve(e)}),t.promise},k.filterTopicByTeam=function(e){return _.filter(S,function(t){return t.team===e.name||t.second_team===e.name})},k.user=function(){return T.countries=_.filter(w,{type:"country"}),T.clubs=_.filter(w,{type:"club"}),T.followed_topics=S,T.teams=w,T.authored_topics=y,T.replies=b,T},k.getTopic=function(e){return c.one(e).get()},k.updateTopic=function(e){var t=i.defer();return c.one(e.id).customPUT(e).then(function(n){var r=_.findIndex(y,{id:e.id});y[r]=n,console.log("Success updated Topic",n),t.resolve(n)}),t.promise},e.$on("followed:topics",function(){k.refreshFollowedTopics(!0)}),k}function n(t,n,r,i,s){function c(){r.activateController([h(!0)],e).then(function(){a=r.createSearchThrottle(f,"replies"),f.replySearch&&a(!0),u("Activated User Replies View")})}function h(e){f.replies=s.replies(),f.replies=t("orderBy")(f.replies,"-created"),f.filteredReplies=f.replies,E()}function p(e){e.keyCode===l.esc?(f.replySearch="",a(!0)):a()}function d(e){var t=r.textContains,n=f.replySearch,i=n?t(e.body,n)||t(e.topic,n)||t(e.body,n)||t(e.created,n)||t(e.votes,n):!0;return i}function v(e){return moment.utc(e).format("ddd hh:mm a")}function m(){return s.fetchUserReplies().then(function(e){h(!0)})}function g(e){return s.deleteReply(e).then(function(){u("Deleted"),h()})}function y(e){f.reply=e,f.updatable=!0}function b(){s.updateReply(f.reply).then(function(){f.updatable=!1,h()})}function w(){f.pagedItems=[];for(var e=0;e<f.filteredReplies.length;e++)e%f.itemsPerPage===0?f.pagedItems[Math.floor(e/f.itemsPerPage)]=[f.filteredReplies[e]]:f.pagedItems[Math.floor(e/f.itemsPerPage)].push(f.filteredReplies[e])}function E(){f.currentPage=0,w()}var o=r.logger.getLogFn,u=o(e),a=function(){},f=this;f.title="All User Comments",f.replies=[];var l=i.keyCodes;f.replySearch="",f.repliesFilter=d,f.search=p,f.filteredReplies=[],f.date=v,f.refresh=m,f.updatable=!1,f.open=y,f.deleteReply=g,f.editReply=b,f.reply={},f.itemsPerPage=6,f.currentPage=0,f.refresh=c(),f.prevPage=function(){f.currentPage>0&&f.currentPage--},f.nextPage=function(){console.log(f.pagedItems),f.currentPage<f.pagedItems.length-1&&f.currentPage++},f.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},f.setPage=function(e){f.currentPage=e}}var e="user_replies";angular.module("app").controller(e,["$filter","$routeParams","common","config","userInfo",n]),angular.module("app").factory("userInfo",["$rootScope","common","$filter","Restangular","$q","ngProgress",t])}(),function(){"use strict";function t(t,n){function o(){n.activateController([u()],e).then(function(){i("Activated Friends View")})}function u(e){s.friends=t.getFriends}function a(){u(!0)}var r=n.logger.getLogFn,i=r(e),s=this;s.title="Friends on Google+ Using Green Football",s.friends=[],s.refresh=a,o(),s.currentPage=0,s.itemsPerPage=6,s.pagedItems=t.pagedFriends,s.prevPage=function(){s.currentPage>0&&s.currentPage--},s.nextPage=function(){s.currentPage<s.pagedItems().length-1&&s.currentPage++},s.setPage=function(e){s.currentPage=e},s.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n}}var e="friends";angular.module("app").controller(e,["userInfo","common",t])}(),function(){"use strict";function t(){return function(e,t,n){if(isNaN(t))return e;if(t<=0)return"";if(e&&e.length>=t){e=e.substring(0,t);if(!n){var r=e.lastIndexOf(" ");r!==-1&&(e=e.substr(0,r))}else while(e.charAt(e.length-1)==" ")e=e.substr(0,e.length-1);return e+"..."}return e}}function n(){return function(e,t){if(isNaN(t))return e;if(t<=0)return"";if(e){var n=e.split(/\s+/);n.length>t&&(e=n.slice(0,t).join(" ")+"...")}return e}}function r(e,t){function u(){return n.customGET("profile").then(function(e){o.user=e,i("Welcome "+o.user.username)})}function a(){e.activateController([u()],"userDetails").then(function(){i("Activated Authors View")})}var n=t.myResource(),r=e.logger.getLogFn,i=r("userReplies"),s=r("userReplies","error"),o=this;o.user={},u(),a()}function i(t,n,r,i,s,o,u,a,f){function v(){return f.complete(),f.start(),o.updateTopic(p.topic).then(function(){f.complete(),p.updatable=!1,y(!0),p.topic={}})}function m(){u.activateController([y(!0)],e).then(function(){d=u.createSearchThrottle(p,"topics"),c("Activated Authors View")})}function g(e){p.updatable=!0,p.canCreate=!1,p.topic=e}function y(e){return o.getAuthoredTopics(e).then(function(e){console.log(e),p.topics=e,p.topics=r("orderBy")(p.topics,"-created"),p.filteredTopics=p.topics,w(),f.complete(),c("Authored Topics Recieved")})}function b(){p.pagedItems=[];for(var e=0;e<p.filteredTopics.length;e++)e%p.itemsPerPage===0?p.pagedItems[Math.floor(e/p.itemsPerPage)]=[p.filteredTopics[e]]:p.pagedItems[Math.floor(e/p.itemsPerPage)].push(p.filteredTopics[e])}function w(){p.currentPage=0,b()}function E(){p.canUpdate=!1}function S(){return f.start(),o.refreshAuthoredTopics().then(function(e){y()})}function x(){p.canCreate=!0,p.updatable=!1}function T(){p.topic={};return}function N(e){if(e.keyCode===h.esc)return T();if(e.type==="click"||e.keyCode===h.enter)return f.complete(),f.start(),o.addTopic(p.topic).then(function(e){c("Topic Added"),y(),p.topic={},C()})}function C(){p.canCreate=!1}function k(e){return f.start(),o.deleteTopic(e).then(function(){f.complete(),c("Topic Deleted"),y()})}function L(e){e.keyCode===h.esc?(p.topicsSearch="",d(!0)):d(),w()}function A(e){var t=u.textContains,n=p.topicsSearch,r=n?t(e.title,n)||t(e.body,n)||t(e.team,n)||t(e.second_team,n):!0;return r}var l=u.logger.getLogFn,c=l(e),h=n.keyCodes,p=this;f.height("10px"),p.addtitle="",p.canCreate=i.create||!1,p.updatable=!1,p.topics=[],p.topic={},p.refresh=S,p.addTopic=N,p.reset=T,p.updateTopic=g,p.deleteTopic=k,p.doneCreating=C,p.query={},p.signedIn=o.isSignedIn,p.search=L,p.teams=[],p.activateCreate=x,p.close=E,p.currentPage=0,p.itemsPerPage=5,p.editTopic=v,p.topicsSearch=i.search||"",p.topicsFilter=A,p.followedTeams=o.teams,p.filteredTopics=[];var d=function(){};m(),p.prevPage=function(){p.currentPage>0&&p.currentPage--},p.nextPage=function(){console.log(p.pagedItems),p.currentPage<p.pagedItems.length-1&&p.currentPage++},p.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},p.setPage=function(e){p.currentPage=e},p.doneUpdating=function(){p.updatable=!1}}var e="author";angular.module("app").controller(e,["bootstrap.dialog","config","$filter","$routeParams","$location","userInfo","common","inhouse","ngProgress",i]),angular.module("app").controller("userDetails",["common","gfService","userInfo",r]),angular.module("app").filter("characters",[t]),angular.module("app").filter("words",[n])}(),function(){"use strict";function t(t,n,r,i,s,o,u,a,f){function d(){c("GF loaded!",null,!0),s.activateController([],e)}function v(e){l.isBusy=e}function m(e){if(e.keyCode===p.esc){l.searchText="";return}if(e.type==="click"||e.keyCode===p.enter){var t="/teams/search/";r.path(t+l.searchText)}}var l=this,c=s.logger.getLogFn(e,"success"),h=o.events;l.busyMessage="Please wait ...",l.isBusy=!0,l.hello="This is me";var p=o.keyCodes;l.search=m,l.searchText="",l.clientId=f.clientId,l.spinnerOptions={radius:40,lines:7,length:0,width:30,speed:1.7,corners:1,trail:100,color:"#F58A00"},l.data=u,d(),i.$on("$routeChangeStart",function(e,t,n){v(!0)}),i.$on(h.controllerActivateSuccess,function(e){v(!1)}),i.$on(h.spinnerToggle,function(e){v(e.show)}),l.userProfile=undefined,l.hasUserProfile=!1,l.immediateFailed=!1,n.$on("event:google-plus-signin-success",function(e,t){l.isSignedIn=!0,console.log(t),u.getCredentials(t)}),n.$on("event:google-plus-signin-failure",function(e,t){console.log(t)})}var e="shell";angular.module("app").controller(e,["$window","$scope","$location","$rootScope","common","config","userInfo","GFAPI","Conf",t])}(),function(){"use strict";function t(e,t,n,r,i,s){function a(){f()}function f(){o.navRoutes=i.filter(function(e){return e.config.settings&&e.config.settings.nav}).sort(function(e,t){return e.config.settings.nav>t.config.settings.nav})}function l(){return s.user().admin}function c(){return s.user().author}function h(e){if(!e.config.title||!n.current||!n.current.title)return"";var t=e.config.title;return n.current.title.substr(0,t.length)===t?"current":""}function p(t){if(t.keyCode===u.esc){o.searchText="";return}if(t.type==="click"||t.keyCode===u.enter){var n="/teams/search/";e.path(n+o.searchText)}}var o=this;o.isCurrent=h;var u=r.keyCodes;o.search=p,o.searchText="",o.user=s.user,o.isAdmin=l,o.isAuthor=c,a()}var e="sidebar";angular.module("app").controller(e,["$location","$route","common","config","routes","userInfo",t])}(),function(){"use strict";function t(e,t,n,r){var i=e.leagueResource(),s={},o={};return o.getLeagues=function(){return i.getList().then(function(e){return s.clubs=_.filter(e,{type:"club"}),s.countries=_.filter(e,{type:"country"}),s})},o.refresh=function(){var e=n.get("gfCache");return typeof e!="undefined"&&(e.remove("/api/v2.0/leagues"),r.$broadcast("refresh:teams")),t.when(!0)},o}function n(t,n,r,i,s){function f(e){u(e.length+" Club Leagues Loaded"),a.pagedClubItems=[];for(var t=0;t<e.length;t++)t%a.itemsPerPage===0?a.pagedClubItems[Math.floor(t/a.itemsPerPage)]=[e[t]]:a.pagedClubItems[Math.floor(t/a.itemsPerPage)].push(e[t])}function l(e){u(e.length+" Club Leagues Loaded"),a.pagedCountryItems=[];for(var t=0;t<e.length;t++)t%a.itemsPerPage===0?a.pagedCountryItems[Math.floor(t/a.itemsPerPage)]=[e[t]]:a.pagedCountryItems[Math.floor(t/a.itemsPerPage)].push(e[t])}function c(){return r.getLeagues().then(function(e){console.log("Leagues",e),a.club_leagues=e.clubs,a.country_leagues=e.countries,l(a.country_leagues),f(a.club_leagues),s.complete()})}function h(){var t=[c()];n.activateController(t,e).then(function(){u("Leagues Loaded")})}function p(){return s.start(),r.refresh().then(function(){c()})}var o=n.logger.getLogFn,u=o(e);s.height("10px");var a=this;a.title="Leagues",a.refresh=p,a.currentClubPage=0,a.currentCountryPage=0,a.itemsPerPage=6,a.club_leagues=[],a.country_leagues=[],h(),a.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},a.prevClubPage=function(){console.log(a.pagedClubItems),a.currentClubPage>0&&a.currentClubPage--},a.nextClubPage=function(){console.log(a.pagedClubItems),a.currentClubPage<a.pagedClubItems.length-1&&a.currentClubPage++},i.subscribe("leagues","league_created",function(e){u(e.league.name+" now available"),p()}),a.setClubPage=function(e){a.currentClubPage=e},a.previousCountryPage=function(){console.log(a.pagedCountryItems),a.currentCountryPage>0&&a.currentCountryPage--},a.nextCountryPage=function(){console.log(a.pagedCountryItems),a.currentCountryPage<a.pagedCountryItems.length-1&&a.currentCountryPage++},a.setCountryPage=function(e){a.currentCountryPagePage=e}}var e="leagues";angular.module("app").controller(e,["$location","common","LeagueService","Pusher","ngProgress",n]),angular.module("app").service("LeagueService",["gfService","$q","$angularCacheFactory","$rootScope",t])}(),function(){"use strict";function t(t,n,r,i,s,o,u){function d(){return u.start(),o.followTeam().then(function(){u.complete()})}function v(){n.activateController([m()],e).then(function(){h=n.createSearchThrottle(c,"teams"),c.teamsSearch&&(h(!0),E()),f("Activated All-Teams View")})}function m(e){return r.teams(e).then(function(e){f("All Teams "+e.length),c.teams=c.filteredTeams=e,h(),E(),u.complete()})}function g(){u.start(),m(!0)}function y(e){e.keyCode===p.esc?(c.teamsSearch="",h(!0)):h(),E()}function b(e){var t=n.textContains,r=c.teamsSearch,i=r?t(e.name,r)||t(e.type,r)||t(e.league,r)||t(e.c_league,r)||t(e.coach,r):!0;return i}function w(e){x(e)?s.url("/teams/"+e):l("You are not Following "+e)}function E(){c.currentPage=0,S()}function S(){c.pagedItems=[];for(var e=0;e<c.filteredTeams.length;e++)e%c.itemsPerPage===0?c.pagedItems[Math.floor(e/c.itemsPerPage)]=[c.filteredTeams[e]]:c.pagedItems[Math.floor(e/c.itemsPerPage)].push(c.filteredTeams[e])}function x(e){return _.findIndex(o.teams(),{name:e})>-1}var a=n.logger.getLogFn,f=a(e),l=a(e,"error"),c=this;u.height("10px"),c.title="All Teams",c.teams=[],c.filteredTeams=[],c.refresh=g;var h=function(){},p=i.keyCodes;c.teamsSearch=t.search||"",c.teamsFilter=b,c.search=y,c.currentPage=0,c.itemsPerPage=6,c.following=x,c.navigateToTopics=w,c.followTeam=d,v(),c.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},c.prevPage=function(){c.currentPage>0&&c.currentPage--},c.nextPage=function(){c.currentPage<c.pagedItems.length-1&&c.currentPage++},c.setPage=function(e){c.currentPage=e}}var e="all_teams";angular.module("app").controller(e,["$routeParams","common","TeamService","config","$location","userInfo","ngProgress",t])}(),function(){"use strict";function t(e,t,n,r){var i=e.teamResource(),s=e.leagueResource(),o={},u=[];return o.getTeams=function(){return i.getList().then(function(e){return u=e,u})},o.getTeamFromLeagueLocal=function(e,n){if(n)return this.refresh(),this.getTeamsFromLeague(e);var r=_.where(u,{league:e});return console.log(r),t.when(r)},o.teams=function(e){return e?(this.refresh(),this.getTeams()):t.when(u)},o.getLeague=function(e){return s.one(e).get().$object},o.getTeamsFromLeague=function(e){return s.one(e).customGETLIST("teams").then(function(e){return u=e,u})},o.refresh=function(){var e=n.get("gfCache");e.remove(u.getRequestedUrl().toString())},r.$on("refresh:teams",function(){o.teams(!0)}),o}function n(t,n,r,i,s,o,u,a){function p(e){s.getTeamFromLeagueLocal(t.league_name,e).then(function(e){l("Teams Refreshed"),h.teams=e,h.filteredTeams=h.teams,console.log(h.teams),v(),a.complete()})}function d(){a.start(),p(!0)}function v(){h.currentPage=0,m()}function m(){for(var e=0;e<h.filteredTeams.length;e++)e%h.itemsPerPage===0?h.pagedItems[Math.floor(e/h.itemsPerPage)]=[h.filteredTeams[e]]:h.pagedItems[Math.floor(e/h.itemsPerPage)].push(h.filteredTeams[e])}function b(){n.activateController([p(!1)],e).then(function(){g=n.createSearchThrottle(h,"teams"),h.teamsSearch&&g(!0),l("Activated Teams View")})}function w(e){return _.findIndex(i.teams(),{name:e})>-1}function E(e){e.keyCode===y.esc?(h.teamsSearch="",g(!0)):g(),v()}function S(e){var t=n.textContains,r=h.teamsSearch,i=r?t(e.name,r)||t(e.type,r)||t(e.league,r)||t(e.c_league,r)||t(e.coach,r):!0;return i}var f=n.logger.getLogFn,l=f(e),c=f(e,"error"),h=this;h.refresh=d,h.league=s.getLeague(t.league_name),h.currentPage=0,h.itemsPerPage=6,a.height("10px"),h.following=w,h.pagedItems=[],h.teams=[],h.filteredTeams=[],o.subscribe(t.league_name.replace(/\s/g,""),"team_created",function(e){l(e.team.name+" now available"),d()}),h.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},h.prevPage=function(){console.log(h.pagedItems),h.currentPage>0&&h.currentPage--},h.nextPage=function(){console.log(h.pagedItems),h.currentPage<h.pagedItems.length-1&&h.currentPage++},h.setPage=function(e){h.currentPage=e};var g=function(){},y=r.keyCodes;h.teamsSearch=t.search||"",h.teamsFilter=S,h.search=E,h.followedTeams=i.teams,b(),h.followTeam=function(e){return console.log(h.following),a.start(),i.followTeam(e).then(function(){a.complete()})}}var e="teams";angular.module("app").controller(e,["$routeParams","common","config","userInfo","TeamService","Pusher","$rootScope","ngProgress",n]),angular.module("app").service("TeamService",["gfService","$q","$angularCacheFactory","$rootScope",t])}(),function(){"use strict";function t(e,t,n){var r=e.teamResource(),i={},s=[];return i.getTeam=function(e){return r.one(e).get().$object},i.getTopicsForTeam=function(e){return r.one(e).customGETLIST("topics").then(function(e){return s=e,s})},i.refresh=function(){var e=t.get("gfCache");e.remove(s.getRequestedUrl().toString()),n.$broadcast("followed:topics")},i}function n(e,t,n,r,i){var s=e.logger.getLogFn,o=s("gfFollowCtrl");i.height("10px");var u=s("gfFollowCtrl","error");n.following=_.findIndex(r.user.teams,{name:n.teamToFollow.name})>-1,n.followTeam=function(){console.log(n.following),i.start(),r.followTeam(n.teamToFollow).then(function(){i.complete()})}}function r(t,n,i,s,o,u,a,f,l){function v(){return _.findIndex(u.teams(),{name:d.team.name})>-1}function m(){return p("You can only vote in the topic Page Sorry!!")}function g(e){return l.start(),u.followTeam(e).then(function(){l.complete()})}function y(){return l.start(),s.refresh(),u.refreshFollowedTopics().then(function(){E()})}function b(){i.activateController([S(),E()],e).then(function(){})}function w(e,t,n){var r={link:"teams/"+e,body:t.topic.title+"    "+n+" for "+e};f.$broadcast("notification",r)}function E(){s.getTopicsForTeam(n.team_name).then(function(e){d.topics=e,d.topics=t("orderBy")(d.topics,"-created"),k(),l.complete(),h("Topics Recieved")})}function S(){d.team=s.getTeam(n.team_name)}function x(){e.count=r.followers_count,e.button_class="following",e.text="Following",e.button_class="",e.count=0,e.text="Follow";var e=angular.element("input.followButton");return e.hasClass("following")?teamResource.unfollowTeam(d.team).then(function(t){d.button=t,d.button.button_class="",e.removeClass("following"),e.removeClass("unfollow"),d.button.text="Follow"}):teamResource.followTeam(d.team).then(function(t){d.button=t,d.button.button_class="",e.addClass("following"),d.button.text="Following"})}function T(){var e=angular.element("input.followButton");e.hasClass("following")&&(e.addClass("unfollow"),e.text("Unfollow"))}function N(){var e=angular.element("input.followButton");e.hasClass("following")&&(e.removeClass("unfollow"),e.text("Following"))}function C(){d.pagedItems=[];for(var e=0;e<d.topics.length;e++)e%d.itemsPerPage===0?d.pagedItems[Math.floor(e/d.itemsPerPage)]=[d.topics[e]]:d.pagedItems[Math.floor(e/d.itemsPerPage)].push(d.topics[e])}function k(){d.currentPage=0,C()}var c=i.logger.getLogFn,h=c(e),p=c(e,"error");l.height("10px");var d=this;d.title="Team",d.clientId=o.clientId,d.team={},d.unfollowTeam=u.unfollowTeam,d.topics=[],d.button={},d.followButton=x,d.followHover=T,d.unFollowHover=N,d.followedTeams=[],d.number=20,d.following=v,d.followTeam=g,d.refresh=y,d.voteNotify=m,d.signedIn=u.isSignedIn,b(),a.subscribe(n.team_name.replace(/\s/g,""),"topic_added",function(e){w(e.team_name,e,"created"),h("New Topic for "+e.team_name),l.reset(),y()}),a.subscribe(n.team_name.replace(/\s/g,""),"topic_updated",function(e){w(e.team_name,e,"updated"),h(e.topic.title+" Updated"),l.reset(),y()}),a.subscribe(n.team_name.replace(/\s/g,""),"topic_deleted",function(e){h(e.topic.title+" Deleted"),l.reset(),y()}),d.currentPage=0,d.itemsPerPage=5,d.prevPage=function(){d.currentPage>0&&d.currentPage--},d.nextPage=function(){console.log(d.pagedItems),d.currentPage<d.pagedItems.length-1&&d.currentPage++},d.range=function(e,t){var n=[];t||(t=e,e=0);for(var r=e;r<t;r++)n.push(r);return n},d.setPage=function(e){d.currentPage=e}}var e="team";angular.module("app").controller(e,["$filter","$routeParams","common","TopicService","Conf","userInfo","Pusher","$rootScope","ngProgress",r]),angular.module("app").controller("gfFollowController",["common","$http","$scope","userInfo","ngProgress",n]),angular.module("app").service("TopicService",["gfService","$angularCacheFactory","$rootScope",t])}(),"use strict",angular.module("directive.g+signin",[]).directive("googlePlusShare",function(){return{restrict:"E",template:'<span id="myBtn"><span class="icon">&nbsp;</span><span>{{text}}</span></span>',transclude:!0,replace:!0,link:function(e,t,n){e.text=n.text,n.$set("class","dissolve-animation demo g-interactivepost"),n.$set("data-prefilltext",n.prefilltext),n.$set("data-calltoactionlabel",n.calltoactionlabel),n.$set("data-clientid",n.clientid+".apps.googleusercontent.com"),n.$set("data-contenturl",n.contenturl),n.$set("data-calltoactionurl",n.contenturl);var r={contentdeeplinkid:"",cookiepolicy:"single_host_origin",calltoactiondeeplinkid:""};angular.forEach(Object.getOwnPropertyNames(r),function(e){n.hasOwnProperty("data-"+e)||n.$set("data-"+e,r[e])}),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client:plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}}}).directive("googleRegularShare",function(){return{restrict:"E",template:'<div class="g-plus" data-action="share"></div>',replace:!0,link:function(e,t,n){(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client:plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()}}}).directive("googlePlusSignin",function(){return{restrict:"E",template:"<span></span>",replace:!0,link:function(e,t,n){n.$set("class","g-signin"),n.$set("data-clientid",n.clientid+".apps.googleusercontent.com");var r={callback:"signinCallback",cookiepolicy:"none",requestvisibleactions:"http://schemas.google.com/AddActivity http://schemas.google.com/ReviewActivity",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email",width:"medium",redirecturi:"postmessage",theme:"dark",accesstype:"offline"};angular.forEach(Object.getOwnPropertyNames(r),function(e){n.hasOwnProperty("data-"+e)||n.$set("data-"+e,r[e])}),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client:plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}}}).run(["$window","$rootScope",function(e,t){e.signinCallback=function(e){e&&e.access_token?t.$broadcast("event:google-plus-signin-success",e):t.$broadcast("event:google-plus-signin-failure",e)}}]),angular.module("app.pusher",[]).provider("PusherService",function(){function i(n,r,i){var s=n.createElement("script");s.type="text/javascript",s.async=!0,s.id=t,s.src=e,s.onreadystatechange=function(){this.readyState=="complete"&&r()},s.onload=r;var o=n.getElementsByTagName("body")[0];o.appendChild(s)}var e="//js.pusher.com/2.1/pusher.min.js",t="pusher-sdk",n="",r={};this.setOptions=function(e){return r=e||r,this},this.setToken=function(e){return n=e||n,this},this.$get=["$document","$timeout","$q","$rootScope","$window",function(e,t,s,o,u){function c(){l=new u.Pusher(n,r)}var a=s.defer(),f,l,h=function(e){c(),t(function(){a.resolve(l)})};return i(e[0],h),a.promise}]});
(function(){"use strict";var e=angular.module("app",["ngAnimate","ngRoute","ngSanitize","common","common.bootstrap","ui.bootstrap"]);e.run(["$route","routemediator",function(e,t){t.updateDoctitle()}])})(),function(){"use strict";var e=angular.module("app");toastr.options.timeOut=4e3,toastr.options.positionClass="toast-bottom-right";var t="/api/v2.0/",n={controllerActivateSuccess:"controller.activateSuccess",spinnerToggle:"spinner.toggle"},r={imageBasePath:"/img/",unknownPersonImageSource:"unknown_person.jpg"},i={backspace:8,tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46},s={appErrorPrefix:"[GF Error] ",docTitle:"GF: ",events:n,keyCodes:i,remoteServiceName:t,version:"2.0.0",imageSettings:r};e.value("config",s),e.config(["$logProvider",function(e){e.debugEnabled&&e.debugEnabled(!0)}]),e.config(["commonConfigProvider",function(e){e.config.controllerActivateSuccessEvent=s.events.controllerActivateSuccess,e.config.spinnerToggleEvent=s.events.spinnerToggle}])}(),function(){"use strict";function t(e,t,n){var r=t.appErrorPrefix,i=n.getLogFn("app","error");return function(t,n){e(t,n);if(r&&t.message.indexOf(r)===0)return;var s={exception:t,cause:n},o=r+t.message;i(o,s,!0)}}var e=angular.module("app");e.config(function(e){e.decorator("$exceptionHandler",["$delegate","config","logger",t])})}(),function(){"use strict";function t(e,t){function r(t,r){return r.resolve=angular.extend(r.resolve||{},{prime:n}),e.when(t,r),e}t.forEach(function(e){r(e.url,e.config)}),e.otherwise({redirectTo:"/"})}function n(e){return e.prime()}function r(){return[{url:"/",config:{templateUrl:"/p/app/dashboard/dashboard.html",title:"dashboard",settings:{nav:1,content:'<i class="icon-dashboard"></i> Dashboard'}}},{url:"/user-topics",config:{title:"user-topics",templateUrl:"/p/app/user/topic.html",settings:{nav:3,content:'<i class="icon-user"></i> User Topics'}}},{url:"/admin",config:{title:"admin",templateUrl:"/p/app/admin/admin.html",settings:{nav:3,content:'<i class="icon-lock"></i>Admin'}}},{url:"/topic/:topic_id",config:{title:"replies",templateUrl:"/p/app/user/single-topic.html",resolve:{single_topic:i}}},{url:"/my-comments",config:{title:"posted-comments",templateUrl:"/p/app/user/user-replies.html",settings:{nav:5,content:'<i class="icon-comments"></i> Posted Replies'}}},{url:"/my-friends",config:{title:"g+_friends",templateUrl:"/p/app/user/friends.html"}},{url:"/leagues",config:{title:"leagues",templateUrl:"/p/app/gf/league.html",settings:{nav:2,content:'<i class="icon-list"></i> Leagues'}}},{url:"/leagues/:league_name",config:{title:"teams",templateUrl:"/p/app/gf/team.html"}},{url:"/teams/:team_name",config:{title:"single-team",templateUrl:"/p/app/gf/single-team.html"}},{url:"/all-teams",config:{title:"all-teams",templateUrl:"/p/app/gf/all_teams.html",settings:{}}},{url:"/teams/search/:search",config:{title:"all-teams",templateUrl:"/p/app/gf/all_teams.html"}},{url:"/author",config:{title:"author",templateUrl:"/p/app/user/author.html",settings:{nav:6,content:'<i class="icon-list"></i> Author'}}},{url:"/update/:topic_id",config:{title:"update-topic",templateUrl:"/p/app/user/update-topic.html",resolve:{single_topic:i,update_topic:s}}},{url:"/add_topic",config:{title:"add-topic",templateUrl:"/p/app/user/update-topic.html",resolve:{update_topic:o}}},{url:"/league_update/:name",config:{title:"update-league",templateUrl:"/p/app/admin/create-league.html",resolve:{update_topic:u}}},{url:"/add_league",config:{title:"add-league",templateUrl:"/p/app/admin/create-league.html",resolve:{update_topic:a}}},{url:"/team_update/:name",config:{title:"update-team",templateUrl:"/p/app/admin/create-team.html",resolve:{update_topic:f}}},{url:"/add_team",config:{title:"add-team",templateUrl:"/p/app/admin/create-team.html",resolve:{update_topic:l}}}]}function i(e,t,n){var r=e.$q.defer();return n.getTopicById(t.current.pathParams.topic_id).then(function(e){r.resolve(e)}),r.promise}function s(e){return e.setTitle("Update Topic")}function o(e){return e.setTitle("Add Topic")}function u(e){return e.setLeagueTitle("Update League")}function a(e){return e.setLeagueTitle("Add League")}function f(e){return e.setTeamTitle("Update Team")}function l(e){return e.setTeamTitle("Add Team")}var e=angular.module("app");e.constant("routes",r()),e.config(["$routeProvider","routes",t]),n.$inject=["datacontext"],i.$inject=["common","$route","datacontext"],s.$inject=["inhouse"],o.$inject=["inhouse"],u.$inject=["inhouse"],a.$inject=["inhouse"],f.$inject=["inhouse"],l.$inject=["inhouse"]}(),function(){"use strict";function t(e,t,n,r,i){function u(t,n){return e.all(t).then(function(e){var t={controllerId:n};a(r.config.controllerActivateSuccessEvent,t)})}function a(){return t.$broadcast.apply(t,arguments)}function f(e,t,r,i,s){console.log(e),s=+s||300,r||(r="filtered"+t[0].toUpperCase()+t.substr(1).toLowerCase(),i=t+"Filter");var o=function(){e[r]=e[t].filter(function(t){return e[i](t)})};return function(){var e;return function(t){e&&(n.cancel(e),e=null),t||!s?o():e=n(o,s)}}()}function l(e,t,r,i){var o=1e3;r=r||o,s[e]&&(n.cancel(s[e]),s[e]=undefined),i?t():s[e]=n(t,r)}function c(e){return/^[-]?\d+$/.test(e)}function h(e,t){return e&&-1!==e.toLowerCase().indexOf(t.toLowerCase())}var s={},o={$broadcast:a,$q:e,$timeout:n,activateController:u,createSearchThrottle:f,debouncedThrottle:l,isNumber:c,logger:i,textContains:h};return o}var e=angular.module("common",[]);e.provider("commonConfig",function(){this.config={},this.$get=function(){return{config:this.config}}}),e.factory("common",["$q","$rootScope","$timeout","commonConfig","logger",t])}(),function(){"use strict";function e(e){function n(e,n){n=n||"log";switch(n.toLowerCase()){case"success":n="logSuccess";break;case"error":n="logError";break;case"warn":n="logWarning";break;case"warning":n="logWarning"}var r=t[n]||t.log;return function(t,n,i){r(t,n,e,i===undefined?!0:i)}}function r(e,t,n,r){u(e,t,n,r,"info")}function i(e,t,n,r){u(e,t,n,r,"warning")}function s(e,t,n,r){u(e,t,n,r,"success")}function o(e,t,n,r){u(e,t,n,r,"error")}function u(t,n,r,i,s){var o=s==="error"?e.error:e.log;r=r?"["+r+"] ":"",o(r,t,n),i&&(s==="error"?toastr.error(t):s==="warning"?toastr.warning(t):s==="success"?toastr.success(t):toastr.info(t))}var t={getLogFn:n,log:r,logError:o,logSuccess:s,logWarning:i};return t}angular.module("common").factory("logger",["$log",e])}(),function(){"use strict";function e(e,t){function r(){s(!1)}function i(){s(!0)}function s(n){e.$broadcast(t.config.spinnerToggleEvent,{show:n})}var n={spinnerHide:r,spinnerShow:i};return n}angular.module("common").factory("spinner",["common","commonConfig",e])}(),function(){"use strict";function t(e,t){function i(e){var t="Confirm Delete";e=e||"item";var n="Delete "+e+"?";return s(t,n)}function s(t,r,i,s){var o={templateUrl:"modalDialog.tpl.html",controller:n,keyboard:!0,resolve:{options:function(){return{title:t,message:r,okText:i,cancelText:s}}}};return e.open(o).result}var r={deleteDialog:i,confirmationDialog:s};return t.put("modalDialog.tpl.html",'<div>    <div class="modal-header">        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" data-ng-click="cancel()">&times;</button>        <h3>{{title}}</h3>    </div>    <div class="modal-body">        <p>{{message}}</p>    </div>    <div class="modal-footer">        <button class="btn btn-primary" data-ng-click="ok()">{{okText}}</button>        <button class="btn btn-info" data-ng-click="cancel()">{{cancelText}}</button>    </div></div>'),r}var e=angular.module("common.bootstrap",["ui.bootstrap"]);e.factory("bootstrap.dialog",["$modal","$templateCache",t]);var n=["$scope","$modalInstance","options",function(e,t,n){e.title=n.title||"Title",e.message=n.message||"",e.okText=n.okText||"OK",e.cancelText=n.cancelText||"Cancel",e.ok=function(){t.close("ok")},e.cancel=function(){t.dismiss("cancel")}}]}(),function(){"use strict";function t(t,n,r,i){function l(){t.activateController([c()],e).then(function(){f=t.createSearchThrottle(u,"topics"),u.topicsSearch&&f(!0),o("Activated Admin View")})}function c(e){return r.getUserTeamTopics(e).then(function(e){return u.topics=u.filteredTopics=e})}function h(){c(!0)}function p(e){e.keyCode===a.esc?(u.replySearch="",f(!0)):f()}function d(e){var n=t.textContains,r=u.topicsSearch,i=r?n(e.body,r)||n(e.author,r)||n(e.team.name,r)||n(e.title,r):!0;return i}function v(e){return moment.utc(e).format("ddd hh:mm a")}var s=t.logger.getLogFn,o=s(e),u=this;u.title="User Topics",u.topics=[],u.filteredTopics=[],u.refresh=h;var a=n.keyCodes;u.topicsSearch="",u.topicsFilter=d,u.search=p,u.date=v;var f=function(){};l()}var e="topics";angular.module("app").controller(e,["common","config","datacontext","inhouse",t])}(),function(){"use strict";function t(t,n,r){function u(){n.activateController([a()],e).then(function(){s("Activated Topic View")})}function a(){return r.getFetchedTopic(t.topic_id).then(function(e){console.log(e),o.topic=e,o.voteCount=o.topic.votes})}function f(){return o.newReply.created=Date.now(),r.saveReply(o.topic,o.newReply).then(function(e){o.newReply.body=""})}function l(e){return r.upVoteTopic(e).then(function(e){console.log(e),o.voteCount=e})}function c(e){return r.downVoteTopic(e).then(function(e){console.log(e),o.voteCount=e})}var i=n.logger.getLogFn,s=i(e),o=this;o.title="Single Topic View",o.topic={},o.addReply=f,o.newReply={},o.voteCount=0,o.upVote=l,o.downVote=c,u()}var e="topic";angular.module("app").controller(e,["$routeParams","common","datacontext",t])}(),function(){"use strict";function t(t,n,r){function f(){t.activateController([l()],e).then(function(){o=t.createSearchThrottle(u,"replies"),u.replySearch&&o(!0),s("Activated User Replies View")})}function l(e){return r.getAllReplies(e).then(function(e){return u.replies=u.filteredReplies=e})}function c(e){e.keyCode===a.esc?(u.replySearch="",o(!0)):o()}function h(e){var n=t.textContains,r=u.replySearch,i=r?n(e.body,r)||n(e.topic.author,r)||n(e.topic.team.name,r)||n(e.topic.title,r):!0;return i}function p(e){return moment.utc(e).format("ddd hh:mm a")}function d(){l(!0)}function v(e){return r.deleteReply(e)}var i=t.logger.getLogFn,s=i(e),o=function(){},u=this;u.title="All User Comments",u.replies=[];var a=n.keyCodes;u.replySearch="",u.repliesFilter=h,u.search=c,u.filteredReplies=[],u.date=p,u.refresh=d,u.deleteReply=v,f()}var e="user_replies";angular.module("app").controller(e,["common","config","datacontext",t])}(),function(){"use strict";function t(t,n){function o(){n.activateController([u()],e).then(function(){i("Activated Authors View")})}function u(e){var n=t.getGooglePlusFriends(e);return typeof n=="undefined"?null:(n.then(function(e){console.log(e),s.friends=e,s.friendsCount=e.length}),n)}function a(){u(!0)}var r=n.logger.getLogFn,i=r(e),s=this;s.title="Friends on Google+ Using Green Football",s.friends=[],s.refresh=a,o()}var e="friends";angular.module("app").controller(e,["datacontext","common",t])}(),function(){"use strict";function t(t,n,r,i){function a(){r.activateController([f(),p(),l()],e).then(function(){o("Activated Authors View")})}function f(e){return n.getAuthorDetails(e).then(function(e){u.author=e,u.teams=u.author.teams})}function l(){u.addtitle=i.getTitle()}function c(){f(!0)}function h(){return u.addtitle==="Update Topic"}function p(){return n.getFetchedTopic().then(function(e){u.topic=e,console.log(u.topic)})}function d(){return u.topic.team=u.query,u.topic.created=Date.now(),n.addTopic(u.topic).then(function(){t.url("/author")})}function v(){return n.updateTopic(u.topic).then(function(){t.url("/author")})}function m(){u.addtitle==="Add Topic"?d():v()}function g(){return n.deleteTopic(u.topic).then(function(){t.url("/author")})}var s=r.logger.getLogFn,o=s(e),u=this;u.addtitle="",u.author={},u.topic,u.refresh=c,u.addTopic=d,u.updateTopic=v,u.deleteTopic=g,u.query,u.teams=[],u.isUpdate=h,u.performAction=m,a()}var e="author";angular.module("app").controller(e,["$location","datacontext","common","inhouse",t])}(),function(){"use strict";function t(t,n){function o(e){return n.getLeagues(e).then(function(e){return s.leagues=e})}function u(){var n=[o()];t.activateController(n,e).then(function(){i("Activated League View")})}function a(){o(!0)}var r=t.logger.getLogFn,i=r(e),s=this;s.title="Leagues",s.leagues=[],s.refresh=a,u()}var e="leagues";angular.module("app").controller(e,["common","datacontext",t])}(),function(){"use strict";function t(t,n,r,i){function l(){n.activateController([c()],e).then(function(){a=n.createSearchThrottle(u,"teams"),u.teamsSearch&&a(!0),o("Activated All-Teams View")})}function c(e){return i.getAllTeams(e).then(function(e){return u.teams=u.filteredTeams=e})}function h(){c(!0)}function p(e){e.keyCode===f.esc?(u.teamsSearch="",a(!0)):a()}function d(e){var t=n.textContains,r=u.teamsSearch,i=r?t(e.name,r):!0;return i}var s=n.logger.getLogFn,o=s(e),u=this;u.title="All Teams",u.teams=[],u.refresh=h;var a=function(){},f=r.keyCodes;u.teamsSearch=t.search||"",u.teamsFilter=d,u.search=p,u.filteredTeams=[],l()}var e="all_teams";angular.module("app").controller(e,["$routeParams","common","config","datacontext",t])}(),function(){"use strict";function t(t,n,r,i){function l(){n.activateController([c()],e).then(function(){a=n.createSearchThrottle(u,"teams"),u.teamsSearch&&a(!0),o("Activated Teams View")})}function c(e){return i.getTeamsFromLeague(u.league_name,e).then(function(e){return u.teams=u.filteredTeams=e})}function h(){c(!0)}function p(e){e.keyCode===f.esc?(u.teamsSearch="",a(!0)):a()}function d(e){var t=n.textContains,r=u.teamsSearch,i=r?t(e.name,r):!0;return i}var s=n.logger.getLogFn,o=s(e),u=this;u.league_name=t.league_name,u.title="Teams",u.teams=[],u.refresh=h;var a=function(){},f=r.keyCodes;u.teamsSearch=t.search||"",u.teamsFilter=d,u.search=p,u.filteredTeams=[],l()}var e="teams";angular.module("app").controller(e,["$routeParams","common","config","datacontext",t])}(),function(){"use strict";function t(t,n,r){function u(){n.activateController([a(),f()],e).then(function(){s("Activated Team View")})}function a(e){return r.getConstructedTeamByName(t.team_name,e).then(function(e){o.team=e})}function f(){return r.getButtonClass(t.team_name).then(function(e){o.button=e})}function l(){var e=angular.element("input.followButton");return e.hasClass("following")?r.unfollowTeam(o.team).then(function(t){o.button=t,o.button.button_class="",e.removeClass("following"),e.removeClass("unfollow"),o.button.text="Follow"}):r.followTeam(o.team).then(function(t){o.button=t,o.button.button_class="",e.addClass("following"),o.button.text="Following"})}function c(){var e=angular.element("input.followButton");e.hasClass("following")&&(e.addClass("unfollow"),e.text("Unfollow"))}function h(){var e=angular.element("input.followButton");e.hasClass("following")&&(e.removeClass("unfollow"),e.text("Following"))}var i=n.logger.getLogFn,s=i(e),o=this;o.title="Team",o.team={},o.button={},o.followButton=l,o.followHover=c,o.unFollowHover=h,u()}var e="team";angular.module("app").controller(e,["$routeParams","common","datacontext",t])}(),function(){"use strict";function t(t,n,r){function a(){var t=[l(),f(),v(),p(),h(),c()];n.activateController(t,e).then(function(){s("Activated Dashboard View")})}function f(){return r.getUserInfo().then(function(e){return u.user=e})}function l(){return r.getRepliesPosted().then(function(e){return u.repliesPostedCount=e})}function c(){return r.isAuthor().then(function(e){return u.isAuthor=e})}function h(){return r.getTopics().then(function(e){return u.topics=e})}function p(){return r.getTeamsFollowedByUser().then(function(e){return u.teams=e})}function d(){u.isSignedIn?s("You successfully Logged in From Google+",null,!0):s("You have signed out from Google+")}function v(){u.isSignedIn=r.isSignedIn()}function m(e){return r.getGooglePlusFriends(e).then(function(e){u.friends=[],u.friendsCount=e.length,u.fetched=!0},function(){u.fetched=!1})}function g(){m(!0)}function y(){u.fetched?t.path("/my-friends"):o("Can't recieve friends now due to bad connection")}var i=n.logger.getLogFn,s=i(e),o=i(e,"error"),u=this;u.news={title:"GF News",description:""},u.gf_news=[],u.repliesPostedCount=0,u.friendsCount=0,u.people=[],u.title="My Dashboard",u.comments=[],u.teams=[],u.friends=[],u.refresh=g,u.topics=[],u.isAuthor=!1,u.sortorder="-votes",u.isSignedIn=!1,u.user={},u.fetched=!1,u.goToFriends=y,a(),d()}var e="dashboard";angular.module("app").controller(e,["$location","common","datacontext",t])}(),function(){"use strict";function t(t,n){function o(){t.activateController([u(),a(),l()],e).then(function(){i("Activated Admin View")})}function u(){return n.getLeagues().then(function(e){return s.leagues=e})}function a(){return n.getAllTeams().then(function(e){return s.teams=e})}function f(e){return n.assignAuthor(e).then(function(t){e=t})}function l(e){return n.getAllUsers(e).then(function(e){return s.users=e})}function c(){l(!0)}var r=t.logger.getLogFn,i=r(e),s=this;s.title="Admin",s.leagues=[],s.teams=[],s.users=[],s.refreshAuthors=c,s.assignAuthor=f,o()}var e="admin";angular.module("app").controller(e,["common","datacontext",t])}(),function(){"use strict";function t(t,n,r,i,s){function f(){var t=[l(),c()];r.activateController(t,e).then(function(){u("Activated League Creation View")})}function l(){return i.getFetchedLeague(t.name).then(function(e){a.league=e})}function c(){a.title=s.getLeagueTitle()}function h(){return i.addLeague(a.league).then(function(){n.url("/admin")})}function p(){return i.updateLeague(a.league).then(function(){n.url("/admin")})}function d(){console.log(a.title),a.title==="Add League"?h():a.title==="Update League"&&p()}function v(){return i.deleteLeague(a.league).then(function(){n.url("/admin")})}var o=r.logger.getLogFn,u=o(e),a=this;a.title="",a.league={},a.save=d,f()}var e="create_league";angular.module("app").controller(e,["$routeParams","$location","common","datacontext","inhouse",t])}(),function(){"use strict";function t(t,n,r,i,s,o){function l(){var t=[c(),d(),p(),h()];i.activateController(t,e).then(function(){a("Activated Team Creation View")})}function c(){return s.getFetchedTeam(n.name).then(function(e){return f.team=e})}function h(){f.title=o.getTeamTitle()}function p(){return s.getAuthors().then(function(e){console.log(e),f.authors=e})}function d(e){return s.getLeagues(e).then(function(e){return f.leagues=e})}function v(){return f.team.admin=f.admin_query.name,f.team.league_name=f.query.name,console.log(f.team),s.addTeam(f.team).then(function(){r.url("/admin")})}function m(){return f.team.admin=f.admin_query.name,f.team.league_name=f.query.name,s.updateTeam(f.team).then(function(){r.url("/admin")})}function g(){f.title==="Add Team"?v():m()}function y(){return s.deleteTeam(f.team).then(function(){r.url("/admin")})}var u=i.logger.getLogFn,a=u(e),f=this;f.title="",f.team={},f.save=g,f.admin_query={name:f.team.admin},f.query={name:f.team.league_name},f.leagues=[],f.authors=[],t.$watch(),l()}var e="create_team";angular.module("app").controller(e,["$scope","$routeParams","$location","common","datacontext","inhouse",t])}(),function(){"use strict";function t(t,n,r,i){function a(){o("GF loaded!",null,!0),n.activateController([],e)}function f(e){s.isBusy=e}var s=this,o=n.logger.getLogFn(e,"success"),u=r.events;s.signedIn=i.isSignedIn(),s.image=i.getUserImage(),s.busyMessage="Please wait ...",s.isBusy=!0,s.hello="This is me",s.spinnerOptions={radius:40,lines:7,length:0,width:30,speed:1.7,corners:1,trail:100,color:"#F58A00"},a(),t.$on("$routeChangeStart",function(e,t,n){f(!0)}),t.$on(u.controllerActivateSuccess,function(e){f(!1)}),t.$on(u.spinnerToggle,function(e){f(e.show)})}var e="shell";angular.module("app").controller(e,["$rootScope","common","config","datacontext",t])}(),function(){"use strict";function t(e,t,n,r,i,s){function a(){f()}function f(){o.navRoutes=i.filter(function(e){return e.config.settings&&e.config.settings.nav}).sort(function(e,t){return e.config.settings.nav>t.config.settings.nav})}function l(e){return s.getUserInfo(e).then(function(e){o.user=e,console.log(e),o.isAdmin=o.user.admin,o.isAuthor=o.user.author})}function c(){l(!0)}function h(e){if(!e.config.title||!n.current||!n.current.title)return"";var t=e.config.title;return n.current.title.substr(0,t.length)===t?"current":""}function p(t){if(t.keyCode===u.esc){o.searchText="";return}if(t.type==="click"||t.keyCode===u.enter){var n="/teams/search/";e.path(n+o.searchText)}}var o=this,u=r.keyCodes;o.isCurrent=h,o.search=p,o.searchText="",o.isAdmin=s.isAdmin(),o.isAuthor=s.isAuthor(),o.getUserData=l,o.user={},o.refresh=c,a(),console.log(o.user)}var e="sidebar";angular.module("app").controller(e,["$location","$route","common","config","routes","datacontext",t])}(),function(){"use strict";function g(g,y,b){function k(){function e(){S("Primed the data")}function t(){}return N?N:(N=w.all([tt(),st(!0),Tt(!0),gt(!0),pt(!0),lt(!0),wt(!0)]).then(t()).then(e),N)}function L(){return console.log(c),c.avatar}function A(e){var t,n=w.defer();return g.get(b.apiBase+"assign_authors/"+e.id).then(function(r){t=r.data.user;var i=m.indexOf(e);m[i]=t,S("Authored "+e.name,t.author,!0),n.resolve(t)},function(e){yt(e)}),n.promise}function O(e){var t;if(_t()&&!e)return t=m,w.when(t);var n=w.defer();return g.get(b.apiBase+"users").then(function(e){return t=e.data.users,m=t,_t(!0),S("All Users Loaded",t.length,!0),n.resolve(t)},function(e){yt(e)}),n.promise}function M(e){var t=w.defer();return g.delete(b.apiBase+"my-replies/"+e.key).then(function(e){S("Reply Deleted",e.data.result,!0),t.resolve(e.data.result)},function(e){yt(e)}),t.promise}function D(e,t){var n;if(kt()&&!t)return n=v,w.when(n);var r=w.defer();g.jsonp("//ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=50&callback=JSON_CALLBACK&q="+encodeURIComponent(e)).then(function(e){})}function P(){return c.token===""?!1:c.token===null?!1:w.when(typeof c.token!="undefined")}function H(){return c.admin}function B(){return c.signed_in}function j(e){if(typeof e=="undefined")return w.when(f);var t=_.find(u,{name:e});return f=t,S("League recieved",t.name,!0),w.when(t)}function F(e){var t=w.defer();return g.get(b.apiBase+"authors").then(function(e){h=e.data.authors,console.log(h),S("Authors Recieved",h.length,0),t.resolve(h)},function(e){yt(e)}),t.promise}function I(e){if(typeof e=="undefined")return w.when(l);var t=_.find(i,{name:e});return S("Team recieved",t.name,!0),l=t,w.when(t)}function q(e){var t=w.defer();return g.post(b.apiBase+"leagues",e).then(function(e){var n=e.data.league;u.push(n),S("League Saved",n.name,!0),t.resolve(n)},function(e){yt(e)}),t.promise}function R(e){var t=w.defer();return g.put(b.apiBase+"leagues/"+e.name,e).then(function(n){var r=n.data.league,i=u.indexOf(e);u[i]=r,S("League Saved",r.name,!0),t.resolve(r)},function(e){yt(e)}),t.promise}function U(e){var t=w.defer();return g.delete(b.apiBase+"leagues/"+e.name).then(function(n){var r=n.data.result,i=u.indexOf(e);$(i,u),S("League Saved",r,!0),t.resolve(r)},function(e){yt(e)}),t.promise}function z(e){var t=w.defer();return e.follow_url=b.root_url+"/gteam/"+e.name,g.post(b.apiBase+"teams",e).then(function(e){var n=e.data.team;S("Team Saved",n.name,!0),i.push(n),t.resolve(n)},function(e){yt(e)}),t.promise}function W(e){var t=w.defer();return g.put(b.apiBase+"teams/"+e.name,e).then(function(n){var r=n.data.team,s=i.indexOf(e);console.log("All topics "+s),i[s]=r,S("Team Updated",r.name,!0),t.resolve(r)},function(e){yt(e)}),t.promise}function X(e){var t=w.defer();return g.delete(b.apiBase+"teams/"+e.name).then(function(n){var r=n.data.result,s=i.indexOf(e);$(s,i),S("League Saved",r,!0),t.resolve(r)},function(e){yt(e)}),t.promise}function V(e,t){var n=_.find(t,{id:e.id});return console.log(n),t.indexOf(n)}function $(e,t){e>-1&&t.splice(e,1)}function J(e){var t,r=V(e,n),i=V(e,d.topics),s=w.defer();return g.put(b.apiBase+"topics/"+e.key,e).then(function(e){t=e.data.topic,n[r]=t,d.topics[i]=t,S("Topic updated",d.topics.length,0),s.resolve(t)},function(e){yt(e)}),s.promise}function K(e){var t,r=w.defer();return e.root_url=b.rootUrl,console.log(e.team.name),g.post(b.apiBase+e.team.name+"/topics",e).then(function(e){t=e.data.topic,n.push(t),d.topics.push(t),console.log(d.topics[V(t,d.topics)]),S("New Topic successfully Added To Server",d.topics.length,!0),r.resolve(t)},function(e){yt(e)}),r.promise}function Q(e){var t=V(e,n),r=V(e,d.topics),i=w.defer();return g.delete(b.apiBase+"topics/"+e.key).then(function(){$(t,n),$(r,d.topics),S("Successfully deleted topic with title "+e.title+".",0,!0),i.resolve()},function(e){yt(e)}),i.promise}function G(e){var t;return e&&(Z(e),Y(e)),Z(),Y(),d.name=c.username,t=d,w.when(t)}function Y(e){var t;if(Lt()&&!e)return t=d.teams,t;var n=w.defer();return g.get(b.apiBase+"teams",{params:{admin_team:!0}}).then(function(e){t=e.data.teams,d.teams=t,Lt(!0),n.resolve(t)},function(e){yt(e)}),n.promise}function Z(e){var t;if(At()&&!e)return t=d.topics,w.when(t);var n=w.defer();return g.get(b.apiBase+"my-topics",{params:{author:!0}}).then(function(e){t=e.data.topics,d.topics=t,S("Author Topics recieved from Server",t.length,!0),At(!0),n.resolve(t)},function(e){yt(e)}),n.promise}function et(){return w.when(p.length)}function tt(e){var t;if(Pt()&&!e)return t=p,w.when(t);var n=w.defer();return g.get(b.apiBase+"my-replies").then(function(e){t=e.data.user_comments,p=t,S("User Replies recieved",t.length,!0),n.resolve(t)},function(e){yt(e)}),n.promise}function nt(e){var t,n=w.defer();return g.delete(b.apiBase+"vote_topic",{params:{topic_key:e.key}}).then(function(e){t=e.data.result.votes,n.resolve(t)},function(e){yt(e),n.reject()}),n.promise}function rt(e){var t,n=w.defer();return g.get(b.apiBase+"vote_topic",{params:{topic_key:e.key}}).then(function(e){t=e.data.result.votes,n.resolve(t)},function(e){yt(e),n.reject()}),n.promise}function it(e,t){var n=w.defer();return g.post(b.apiBase+"post_reply/"+e.key,t).then(function(t){var r=t.data.reply;console.log(e),typeof e.replies=="undefined"&&(e.replies=[]),e.replies.push(r),p.push(r),a=e,n.resolve(r),S("Reply Posted",e.replies.length,!0)},function(e){yt(e),n.reject(e)}),n.promise}function st(e){var t;if(!e&&Mt())return t=c,w.when(t);var n=w.defer();return g.get(b.apiBase+"profile").then(function(e){c=e.data.user,t=e.data.user,n.resolve(t)},function(e){yt(e),n.reject()}),n.promise}function ot(e){var t,n=w.defer();return g.get(b.apiBase+e.name+"/follow").then(function(r){console.log(r.data.model),t=r.data.model,ut(!0,e,o),console.log(o),n.resolve(t)},function(e){yt(e),n.reject()}),n.promise}function ut(e,t,n){var r={name:t.name,logo:t.logo};if(e)n.push(r);else{var i=_.find(n,{name:r.name}),s=n.indexOf(i);$(s,n)}}function at(e){var t,n=w.defer();return g.delete(b.apiBase+e.name+"/follow").then(function(r){ut(!1,e,o),console.log(o),t=r.data.model,n.resolve(t)},function(e){yt(e),n.reject()}),n.promise}function ft(e,t){var n={};t&&Et(t);var r=_.find(o,{name:e});return console.log(r),typeof r!="undefined"?(n.count=r.followers_count,n.button_class="following",n.text="Following"):(n.button_class="",n.count=0,n.text="Follow"),w.when(n)}function lt(e){var t;if(Bt()&&!e)return t=i,w.when(t);var n=w.defer();return g.get(b.apiBase+"teams").then(function(e){angular.copy(e.data.teams,i),t=e.data.teams,Bt(!0),n.resolve(t)},function(e){yt(e),n.reject()}),n.promise}function ct(e,t){var r={};return t&&(lt(t),pt(t)),r=_.find(i,{name:e.name}),r.topics=_.filter(n,function(t){return t.team.name===e.name}),console.log(r.topics),w.when(r)}function ht(e,t){var n=_.find(i,{name:e});return S(n.name+"by beesama"),ct(n,t)}function pt(e){var t;if(Ot()&&!e)return t=n,w.when(t);var r=w.defer();return g.get(b.apiBase+"topics",{params:{include_replies:!0}}).then(function(e){angular.copy(e.data.topics,n),t=e.data.topics,Ot(!0),r.resolve(t)},function(e){yt(e),r.reject()}),r.promise}function dt(e,t){t&&lt(t);var n=_.where(i,{league:e});return w.when(n)}function vt(e){return typeof a=="undefined"&&mt(e),w.when(a)}function mt(e,t){var r=_.find(n,{id:parseInt(e)});return a=r,w.when(r)}function gt(e){var t;if(Mt()&&!e)return t=r,w.when(t);if(Ct())return t=bt(),w.when(t);var n=w.defer();return g.get(b.apiBase+"my-topics").then(function(i){Et(e),angular.copy(i.data.topics,r),t=i.data.topics,Mt(!0),S("Retrieved [User Teams Topics] from remote data source",t.length,!0),n.resolve(t)},function(e){yt(e),n.reject()}),n.promise}function yt(e){var t=config.appErrorPrefix+"Error retrieving data."+e.message;throw x(t,e),e}function bt(){var e=[]}function wt(e){if(Dt()&&!e)return w.when(s);if(!c.signed_in)return w.when([]);var t=w.defer();return g.get(b.apiBase+"friends").then(function(e){s=e.data.user,Dt(!0),S("Friends Recieved",s.length,0),t.resolve(s)},function(e){x("Could not recieve Friends"),t.reject(e)}),t.promise}function Et(e){var t=[];if(Mt()&&!e)return t=o,w.when(t);var n=w.defer();return g.get(b.apiBase+"teams",{params:{user:!0}}).then(function(e){angular.copy(e.data.teams,o),t=o,S("Teams followed by User retrieved from server",t.length,!0),n.resolve(t)},function(e){yt(e)}),n.promise}function St(){return w.when(c.author)}function xt(){return w.when(72)}function Tt(e){var t;if(Ht()&&!e)return t=u,w.when(t);var n=w.defer();return g.get(b.apiBase+"leagues",{params:{include_teams:!0}}).then(function(e){angular.copy(e.data.leagues,u),t=e.data.leagues,Ht(!0),n.resolve(t)},function(e){yt(e),n.reject()}),n.promise}function Nt(){var e=[{firstName:"John",lastName:"Papa",age:25,location:"Florida"},{firstName:"Ward",lastName:"Bell",age:31,location:"California"},{firstName:"Colleen",lastName:"Jones",age:21,location:"New York"},{firstName:"Madelyn",lastName:"Green",age:18,location:"North Dakota"},{firstName:"Ella",lastName:"Jobs",age:18,location:"South Dakota"},{firstName:"Landon",lastName:"Gates",age:11,location:"South Carolina"},{firstName:"Haley",lastName:"Guthrie",age:35,location:"Wyoming"}];return w.when(e)}function Ct(e){return jt("loaded_locally",e)}function kt(e){return jt("news",e)}function Lt(e){return jt("author_teams",e)}function At(e){return jt("author_topics",e)}function Ot(e){return jt("all_topics",e)}function Mt(e){return jt("user_teams_topics",e)}function _t(e){return jt("all_users",e)}function Dt(e){return jt("friends",e)}function Pt(e){return jt("user_replies",e)}function Ht(e){return jt("league_with_teams",e)}function Bt(e){return jt("teams",e)}function jt(e,n){return n===undefined?t.isLoaded[e]:t.isLoaded[e]=n}var w=y.$q,E=y.logger.getLogFn,S=E(e),x=E(e,"error"),T=E(e,"success"),N,C={getUserTeamTopics:gt,getMessageCount:xt,getPeople:Nt,getFetchedTopic:vt,getLeagues:Tt,getTeamsFromLeague:dt,getButtonClass:ft,followTeam:ot,unfollowTeam:at,saveReply:it,upVoteTopic:rt,downVoteTopic:nt,getTeamsFollowedByUser:Et,getRepliesPosted:et,isAuthor:St,getGooglePlusFriends:wt,prime:k,getConstructedTeamByName:ht,getTopics:pt,getAllTeams:lt,getAuthorDetails:G,addTopic:K,updateTopic:J,deleteTopic:Q,getAllReplies:tt,getTopicById:mt,isAdmin:H,deleteLeague:U,updateLeague:R,addLeague:q,getFetchedLeague:j,getFetchedTeam:I,getAuthors:F,addTeam:z,updateTeam:W,deleteTeam:X,hasGooglePlusToken:P,isSignedIn:B,getUserInfo:st,getNews:D,deleteReply:M,assignAuthor:A,getAllUsers:O,getUserImage:L};return C}var e="datacontext";angular.module("app").factory(e,["$http","common","Conf",g]);var t={isLoaded:{user_teams_topics:!1,author_topics:!1,league_with_teams:!1,teams:!1,all_topics:!1,loaded_locally:!1,author_teams:!1,friends:!1,news:!1,user_replies:!1,all_users:!1}},n=[],r=[],i=[],s=[],o=[],u=[],a,f,l,c={},h=[],p=[],d={},v=[],m=[]}(),function(){"use strict";function t(e){function s(){return r}function o(e){r=e}function u(){return i}function a(e){i=e}function f(e){n=e}function l(){return n}function c(e){return moment.utc(e).format("ddd hh:mm a")}var t=e.$q,n="",r="",i="";return{setTitle:f,getLeagueTitle:s,setLeagueTitle:o,getTeamTitle:u,setTeamTitle:a,getTitle:l,setDate:c}}var e="inhouse";angular.module("app").service(e,["common",t])}(),function(){"use strict";var e=angular.module("app");e.directive("ccSidebar",["$window",function(e){function r(e,t,r){function o(){n.width()>=765?i.slideDown(350):i.slideUp(350)}function u(e){function n(){i.slideUp(350),$(".sidebar-dropdown a").removeClass(t)}var t="dropy";e.preventDefault(),s.hasClass(t)?s.hasClass(t)&&(s.removeClass(t),i.slideUp(350)):(n(),i.slideDown(350),s.addClass(t))}var i=t.find(".sidebar-inner"),s=t.find(".sidebar-dropdown a");t.addClass("sidebar"),n.resize(o),s.click(u)}var t={link:r,restrict:"A"},n=$(e);return t}]),e.directive("ccWidgetClose",function(){function t(e,t,n){function r(e){e.preventDefault(),t.parent().parent().parent().hide(100)}n.$set("href","#"),n.$set("wclose"),t.click(r)}var e={link:t,template:'<i class="icon-remove"></i>',restrict:"A"};return e}),e.directive("ccWidgetMinimize",function(){function t(e,t,n){function r(e){e.preventDefault();var n=
t.parent().parent().next(".widget-content"),r=t.children("i");n.is(":visible")?(r.removeClass("icon-chevron-up"),r.addClass("icon-chevron-down")):(r.removeClass("icon-chevron-down"),r.addClass("icon-chevron-up")),n.toggle(500)}n.$set("href","#"),n.$set("wminimize"),t.click(r)}var e={link:t,template:'<i class="icon-chevron-up"></i>',restrict:"A"};return e}),e.directive("ccScrollToTop",["$window",function(e){function n(t,n,r){function s(){i.scrollTop()>300?n.slideDown():n.slideUp()}var i=$(e);n.addClass("totop"),i.scroll(s),n.find("a").click(function(e){e.preventDefault(),$("body").animate({scrollTop:0},500)})}var t={link:n,template:'<a href="#"><i class="icon-chevron-up"></i></a>',restrict:"A"};return t}]),e.directive("ccSpinner",["$window",function(e){function n(t,n,r){t.spinner=null,t.$watch(r.ccSpinner,function(r){t.spinner&&t.spinner.stop(),t.spinner=new e.Spinner(r),t.spinner.spin(n[0])},!0)}var t={link:n,restrict:"A"};return t}]),e.directive("ccImgPerson",["config",function(e){function i(e,r,i){i.$observe("ccImgPerson",function(e){e=t+(e||n),i.$set("src",e)})}var t=e.imageSettings.imageBasePath,n=e.imageSettings.unknownPersonImageSource,r={link:i,restrict:"A"};return r}]),e.directive("ccWidgetHeader",function(){function t(e,t,n){n.$set("class","widget-head")}var e={link:t,scope:{title:"@",subtitle:"@",rightText:"@",allowCollapse:"@"},templateUrl:"/p/app/layout/widgetheader.html",restrict:"A"};return e}),e.directive("upvote",function(){return{restrict:"E",templateUrl:"/p/app/layout/upvote.html",scope:{count:"@",upvote:"&",downvote:"&"}}})}(),function(){"use strict";function t(e,t){function n(){var t=e.protocol()+"://"+e.host();return e.port()&&(t+=":"+e.port()),t}var r=t.remoteServiceName,i={clientId:"183001439932-7t9lg5ojepm5vnk4t3okn2ot2af9r0io.apps.googleusercontent.com",apiBase:r,rootUrl:n(),scopes:"https://www.googleapis.com/auth/plus.login ",requestvisibleactions:"http://schemas.google.com/AddActivity http://schemas.google.com/ReviewActivity",cookiepolicy:"single_host_origin"};return i}var e="Conf";angular.module("app").factory(e,["$location","config",t])}(),function(){"use strict";function t(t,n,r,i){function u(){f(),a()}function a(){n.$on("$routeChangeError",function(n,r,o,u){if(s)return;s=!0;var a="Error routing: "+(r&&r.name)+". "+(u.msg||"");i.logWarning(a,r,e,!0),t.path("/")})}function f(){n.$on("$routeChangeSuccess",function(e,t,i){s=!1;var o=r.docTitle+" "+(t.title||"");n.title=o})}var s=!1,o={setRoutingHandlers:u,updateDoctitle:f};return o}var e="routemediator";angular.module("app").factory(e,["$location","$rootScope","config","logger",t])}();